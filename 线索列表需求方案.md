# çº¿ç´¢åˆ—è¡¨ï¼ˆæ€»çœ‹æ¿ï¼‰- éœ€æ±‚æ–¹æ¡ˆ

> **ç‰ˆæœ¬**: v1.0
> **æ›´æ–°æ—¥æœŸ**: 2025-12-21
> **è¯´æ˜**: åŸºäºCEO SCRMç³»ç»Ÿçº¿ç´¢åˆ—è¡¨é¡µé¢è®¾è®¡ï¼Œæ€»çœ‹æ¿åŠŸèƒ½

---

## ğŸ“‹ é¡µé¢æ¦‚è¿°

### æ ¸å¿ƒåŠŸèƒ½
çº¿ç´¢åˆ—è¡¨æ˜¯æ•´ä¸ªç³»ç»Ÿçš„æ€»çœ‹æ¿ï¼ŒæŒ‰ç…§ä¸åŒç»´åº¦å±•ç¤ºæ‰€æœ‰æ¿€æ´»ç ï¼ˆåˆ†ç»„ï¼‰çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œæ¯ä¸ªæ¿€æ´»ç ä¸‹çš„æ¯ä¸ªå¹³å°å³æ˜¯ä¸€ä¸ªå·¥å•ã€‚

### é¡µé¢è·¯å¾„
`/leads-list` æˆ– `/dashboard-overview`

### é¡µé¢è¯´æ˜
å·¥å•é“¾æ¥å¯æŒ‰ç…§ä¸åŒç»´åº¦è¿›è¡Œåˆ†äº«é“¾æ¥ï¼Œæ¯ä¸ªæ¿€æ´»ç ä¸‹çš„æ¯ä¸ªå¹³å°å³æ˜¯ä¸€ä¸ªå·¥å•

---

## ğŸ” ç­›é€‰åŠŸèƒ½

### ç­›é€‰æ¡ä»¶

#### 1. æ—¶é—´èŒƒå›´ç­›é€‰
- **å­—æ®µ**: `created_at` æˆ– `last_login_at`
- **ç±»å‹**: æ—¥æœŸèŒƒå›´é€‰æ‹©å™¨
- **æ˜¾ç¤º**: 
  ```
  [å¼€å§‹æ—¶é—´] ~ [æˆªæ­¢æ—¶é—´]
  ```

#### 2. æ¿€æ´»ç æœç´¢
- **å­—æ®µ**: `activation_code`
- **ç±»å‹**: æ–‡æœ¬è¾“å…¥æ¡†
- **å ä½ç¬¦**: "è¯·è¾“å…¥æ¿€æ´»ç "
- **åŒ¹é…æ–¹å¼**: æ¨¡ç³Šæœç´¢

#### 3. å¤‡æ³¨ä¿¡æ¯æœç´¢
- **å­—æ®µ**: `remark`
- **ç±»å‹**: æ–‡æœ¬è¾“å…¥æ¡†
- **å ä½ç¬¦**: "è¯·è¾“å…¥å¤‡æ³¨ä¿¡æ¯"
- **åŒ¹é…æ–¹å¼**: æ¨¡ç³Šæœç´¢

#### 4. å¯ç”¨çŠ¶æ€ç­›é€‰
- **å­—æ®µ**: `is_active`
- **ç±»å‹**: ä¸‹æ‹‰é€‰æ‹©
- **é€‰é¡¹**:
  - å…¨éƒ¨
  - æ­£å¸¸
  - å·²ç¦ç”¨

### ç­›é€‰æ“ä½œæŒ‰é’®
```
[ğŸ” æœç´¢]  [ğŸ”„ é‡é€‰]
```

- **æœç´¢**: åº”ç”¨ç­›é€‰æ¡ä»¶
- **é‡é€‰**: æ¸…ç©ºæ‰€æœ‰ç­›é€‰æ¡ä»¶ï¼Œæ¢å¤é»˜è®¤çŠ¶æ€

---

## âš™ï¸ åŠŸèƒ½æŒ‰é’®

### ä¿ç•™çš„åŠŸèƒ½æŒ‰é’®

#### 1. æ¿€æ´»ç åˆ†ç»„
- **æŒ‰é’®æ–‡å­—**: `æ¿€æ´»ç åˆ†ç»„ â–¼`
- **åŠŸèƒ½**: ç®¡ç†æ¿€æ´»ç çš„äºŒçº§åˆ†ç»„å½’ç±»

#### 2. æ–°å¢æ¿€æ´»ç 
- **æŒ‰é’®æ–‡å­—**: `â• æ–°å¢æ¿€æ´»ç `
- **åŠŸèƒ½**: åˆ›å»ºæ–°çš„åˆ†ç»„ï¼ˆæ¿€æ´»ç ï¼‰

#### 3. æ‰¹é‡æ“ä½œ
- **æŒ‰é’®æ–‡å­—**: `ğŸ“¦ æ‰¹é‡æ“ä½œ â–¼`
- **åŠŸèƒ½**: å¯¹é€‰ä¸­çš„æ¿€æ´»ç è¿›è¡Œæ‰¹é‡æ“ä½œ
  - æ‰¹é‡ç¦ç”¨/å¯ç”¨
  - æ‰¹é‡ä¿®æ”¹ç½®é›¶æ—¶é—´
  - æ‰¹é‡ä¿®æ”¹å»é‡èŒƒå›´
  - æ‰¹é‡åˆ†ç»„å½’ç±»

### ç§»é™¤çš„åŠŸèƒ½
- âŒ åˆ†äº«å·¥å•
- âŒ å¯¼å‡ºè¡¨æ ¼
- âŒ åˆ†äº«å†å²

---

## ğŸ“Š åˆ—è¡¨å­—æ®µå®šä¹‰

### ä¿ç•™çš„å­—æ®µ

| åºå· | å­—æ®µå | è¯´æ˜ | æ˜¯å¦ä¿ç•™ |
|-----|--------|------|---------|
| 1 | â˜‘ | å¤é€‰æ¡† | âœ… ä¿ç•™ |
| 2 | æ¿€æ´»ç  | åˆ†ç»„çš„æ¿€æ´»ç  | âœ… ä¿ç•™ |
| 3 | - | å±•å¼€/æŠ˜å æŒ‰é’® | âœ… ä¿ç•™ |
| 4 | å¯ç”¨çŠ¶æ€ | æ­£å¸¸/å·²ç¦ç”¨ | âœ… ä¿ç•™ |
| 5 | å ç”¨/åˆ†é… | å ç”¨æ•°/åˆ†é…æ•° | âœ… ä¿ç•™ |
| 6 | åœ¨çº¿/æ€»è´¦å· | åœ¨çº¿æ•°/æ€»è´¦å·æ•° | âœ… ä¿ç•™ |
| 7 | å¤‡æ³¨ä¿¡æ¯ | åˆ†ç»„å¤‡æ³¨ | âœ… ä¿ç•™ |
| 8 | è¯´æ˜ | åˆ†ç»„è¯´æ˜ | âœ… ä¿ç•™ |
| 9 | Line | Lineå¹³å°è´¦å·æ•° | âœ… ä¿ç•™ |
| 10 | Line Business | Line Businesså¹³å°è´¦å·æ•° | âœ… ä¿ç•™ |
| 11 | å½“æ—¥è¿›çº¿ | è¯¥åˆ†ç»„å½“æ—¥è¿›çº¿æ€»æ•° | âœ… æ–°å¢ |
| 12 | æ€»è¿›çº¿ | è¯¥åˆ†ç»„å†å²è¿›çº¿æ€»æ•° | âœ… æ–°å¢ |
| 13 | é‡å¤è¿›çº¿ | è¯¥åˆ†ç»„é‡å¤è¿›çº¿æ•° | âœ… æ–°å¢ |
| 14 | å»é‡èŒƒå›´ | å»é‡è®¾ç½® | âœ… ä¿ç•™ |
| 15 | åˆ›å»ºæ—¶é—´/æœ€è¿‘ç™»å½• | æ—¶é—´ä¿¡æ¯ | âœ… ä¿ç•™ |
| 16 | æ“ä½œ | æ“ä½œæŒ‰é’® | âœ… ä¿ç•™ |

### ç§»é™¤çš„å­—æ®µ
- âŒ WhatsApp
- âŒ Telegram
- âŒ Telegram-ZH
- âŒ Zalo
- âŒ LINE WORKS
- âŒ Messenger
- âŒ Facebook
- âŒ çº¿ç´¢åˆ†æ
- âŒ èŠå¤©å¤‡ä»½
- âŒ åˆ†ç»„ï¼ˆä¿ç•™åœ¨ç­›é€‰åŠŸèƒ½ä¸­å³å¯ï¼‰

---

## ğŸ“ å­—æ®µè¯¦ç»†è¯´æ˜

### 1. å¤é€‰æ¡†
- **åŠŸèƒ½**: å‹¾é€‰åå¯è¿›è¡Œæ‰¹é‡æ“ä½œ
- **ä½ç½®**: è¡¨æ ¼ç¬¬ä¸€åˆ—

---

### 2. æ¿€æ´»ç 
- **å­—æ®µå**: `activation_code`
- **ç±»å‹**: `VARCHAR(32)`
- **è¯´æ˜**: åˆ†ç»„çš„å”¯ä¸€æ¿€æ´»ç 
- **æ˜¾ç¤ºæ–¹å¼**: æ–‡å­—æ˜¾ç¤º + å¤åˆ¶æŒ‰é’®

**ç¤ºä¾‹**:
```
TF6AwzwT [ğŸ“‹]
vv2NMw8J [ğŸ“‹]
y2E7uw29 [ğŸ“‹]
```

**äº¤äº’**:
- ç‚¹å‡»æ¿€æ´»ç å¯è·³è½¬åˆ°è¯¥åˆ†ç»„çš„è¯¦ç»†é¡µé¢
- ç‚¹å‡»å¤åˆ¶æŒ‰é’®å¤åˆ¶æ¿€æ´»ç 

---

### 3. å±•å¼€/æŠ˜å æŒ‰é’®
- **å­—æ®µå**: -
- **ç±»å‹**: æŒ‰é’®
- **è¯´æ˜**: å±•å¼€æˆ–æŠ˜å è¯¥æ¿€æ´»ç ä¸‹çš„è¯¦ç»†ä¿¡æ¯ï¼ˆå¦‚å„å¹³å°çš„è¯¦ç»†æ•°æ®ï¼‰
- **æ˜¾ç¤º**: `-` æˆ– `+` å›¾æ ‡

**åŠŸèƒ½**:
- é»˜è®¤æ”¶èµ·çŠ¶æ€
- ç‚¹å‡»å±•å¼€ï¼Œæ˜¾ç¤ºè¯¥æ¿€æ´»ç ä¸‹å„å¹³å°çš„è¯¦ç»†ç»Ÿè®¡
- å†æ¬¡ç‚¹å‡»æŠ˜å 

---

### 4. å¯ç”¨çŠ¶æ€
- **å­—æ®µå**: `is_active`
- **ç±»å‹**: `BOOLEAN`
- **è¯´æ˜**: è¯¥åˆ†ç»„æ˜¯å¦å¯ç”¨
- **å¯é€‰å€¼**:
  - `æ­£å¸¸` (is_active = true)
  - `å·²ç¦ç”¨` (is_active = false)

**æ˜¾ç¤ºæ–¹å¼**:
```
æ­£å¸¸        (ç»¿è‰²æ ‡ç­¾)
å·²ç¦ç”¨      (ç°è‰²æ ‡ç­¾)
```

---

### 5. å ç”¨/åˆ†é…
- **å­—æ®µå**: `used_count` / `allocated_count`
- **ç±»å‹**: `INTEGER` / `INTEGER`
- **è¯´æ˜**: 
  - **å ç”¨æ•°**: å½“å‰å·²ä½¿ç”¨çš„ç«¯å£æ•°
  - **åˆ†é…æ•°**: æ€»å…±åˆ†é…çš„ç«¯å£æ•°ä¸Šé™

**æ˜¾ç¤ºæ–¹å¼**:
```
0/ä¸é™åˆ¶
6/100
18/30
```

**è®¡ç®—é€»è¾‘**:
- å ç”¨æ•° = å½“å‰åœ¨çº¿çš„Lineè´¦å·æ•°
- åˆ†é…æ•° = è¯¥åˆ†ç»„çš„è´¦å·ä¸Šé™é…ç½®ï¼ˆnullæˆ–0è¡¨ç¤ºä¸é™åˆ¶ï¼‰

---

### 6. åœ¨çº¿/æ€»è´¦å·
- **å­—æ®µå**: `online_count` / `total_count`
- **ç±»å‹**: `INTEGER` / `INTEGER`
- **è¯´æ˜**: 
  - **åœ¨çº¿æ•°**: å½“å‰åœ¨çº¿çš„Lineè´¦å·æ•°é‡
  - **æ€»è´¦å·**: è¯¥åˆ†ç»„ä¸‹æ‰€æœ‰Lineè´¦å·æ€»æ•°

**æ˜¾ç¤ºæ–¹å¼**:
```
6/6    (å…¨éƒ¨åœ¨çº¿)
9/17   (éƒ¨åˆ†åœ¨çº¿)
0/0    (æ— è´¦å·)
```

**è®¡ç®—é€»è¾‘**:
- åœ¨çº¿æ•° = COUNT(line_accounts WHERE group_id = X AND online_status = 'online')
- æ€»è´¦å· = COUNT(line_accounts WHERE group_id = X AND deleted_at IS NULL)

---

### 7. å¤‡æ³¨ä¿¡æ¯
- **å­—æ®µå**: `remark`
- **ç±»å‹**: `VARCHAR(255)`
- **è¯´æ˜**: åˆ†ç»„çš„å¤‡æ³¨ä¿¡æ¯
- **æ˜¾ç¤ºæ–¹å¼**: æ–‡å­—æ˜¾ç¤º + ç¼–è¾‘å›¾æ ‡

**ç¤ºä¾‹**:
```
å¾·å2 [âœï¸]
å¤§é±¼æ™®é€šå· [âœï¸]
æˆ˜ç‹¼ [âœï¸]
```

**äº¤äº’**:
- ç‚¹å‡»ç¼–è¾‘å›¾æ ‡ï¼Œå†…è”ç¼–è¾‘æˆ–å¼¹å‡ºè¾“å…¥æ¡†
- æ”¯æŒå¿«é€Ÿä¿®æ”¹

---

### 8. è¯´æ˜
- **å­—æ®µå**: `description`
- **ç±»å‹**: `TEXT`
- **è¯´æ˜**: åˆ†ç»„çš„è¯¦ç»†è¯´æ˜ä¿¡æ¯
- **æ˜¾ç¤ºæ–¹å¼**: å›¾æ ‡æŒ‰é’®

**ç¤ºä¾‹**:
```
[â„¹ï¸]  (æœ‰è¯´æ˜æ—¶æ˜¾ç¤º)
-     (æ— è¯´æ˜æ—¶æ˜¾ç¤º)
```

**äº¤äº’**:
- ç‚¹å‡»å›¾æ ‡ï¼Œå¼¹å‡ºæ°”æ³¡æˆ–å¼¹çª—æ˜¾ç¤ºå®Œæ•´è¯´æ˜
- å¯åœ¨ç¼–è¾‘é¡µé¢ä¿®æ”¹

---

### 9. Line
- **å­—æ®µå**: `line_count`
- **ç±»å‹**: `INTEGER`
- **è¯´æ˜**: è¯¥åˆ†ç»„ä¸‹Lineå¹³å°çš„è´¦å·æ•°é‡
- **æ˜¾ç¤ºæ–¹å¼**: æ•°å­—

**ç¤ºä¾‹**:
```
287
150
0
```

**è®¡ç®—é€»è¾‘**:
```sql
SELECT COUNT(*) 
FROM line_accounts 
WHERE group_id = X 
  AND platform_type = 'line' 
  AND deleted_at IS NULL
```

---

### 10. Line Business
- **å­—æ®µå**: `line_business_count`
- **ç±»å‹**: `INTEGER`
- **è¯´æ˜**: è¯¥åˆ†ç»„ä¸‹Line Businesså¹³å°çš„è´¦å·æ•°é‡
- **æ˜¾ç¤ºæ–¹å¼**: æ•°å­—

**ç¤ºä¾‹**:
```
235
80
0
```

**è®¡ç®—é€»è¾‘**:
```sql
SELECT COUNT(*) 
FROM line_accounts 
WHERE group_id = X 
  AND platform_type = 'line_business' 
  AND deleted_at IS NULL
```

---

### 11. å½“æ—¥è¿›çº¿
- **å­—æ®µå**: `today_incoming_count`
- **ç±»å‹**: `INTEGER`
- **è¯´æ˜**: è¯¥åˆ†ç»„ä»Šæ—¥è¿›çº¿æ€»æ•°ï¼ˆä»ç½®é›¶æ—¶é—´å¼€å§‹è®¡ç®—ï¼‰
- **æ˜¾ç¤ºæ–¹å¼**: æ•°å­—

**ç¤ºä¾‹**:
```
120
56
0
```

**è®¡ç®—é€»è¾‘**:
```sql
SELECT COUNT(*) 
FROM incoming_logs il
JOIN line_accounts la ON il.line_account_id = la.id
WHERE la.group_id = X 
  AND il.incoming_time >= {ä»Šæ—¥é‡ç½®æ—¶é—´}
```

---

### 12. æ€»è¿›çº¿
- **å­—æ®µå**: `total_incoming_count`
- **ç±»å‹**: `INTEGER`
- **è¯´æ˜**: è¯¥åˆ†ç»„å†å²è¿›çº¿æ€»æ•°ï¼ˆæ‰€æœ‰æ—¶é—´ï¼‰
- **æ˜¾ç¤ºæ–¹å¼**: æ•°å­—

**ç¤ºä¾‹**:
```
5000
3200
150
```

**è®¡ç®—é€»è¾‘**:
```sql
SELECT COUNT(*) 
FROM incoming_logs il
JOIN line_accounts la ON il.line_account_id = la.id
WHERE la.group_id = X
```

---

### 13. é‡å¤è¿›çº¿
- **å­—æ®µå**: `duplicate_incoming_count`
- **ç±»å‹**: `INTEGER`
- **è¯´æ˜**: è¯¥åˆ†ç»„çš„é‡å¤è¿›çº¿æ•°ï¼ˆæ ¹æ®å»é‡èŒƒå›´åˆ¤æ–­ï¼‰
- **æ˜¾ç¤ºæ–¹å¼**: æ•°å­—

**ç¤ºä¾‹**:
```
150
80
10
```

**è®¡ç®—é€»è¾‘**:
```sql
SELECT COUNT(*) 
FROM incoming_logs il
JOIN line_accounts la ON il.line_account_id = la.id
WHERE la.group_id = X 
  AND il.is_duplicate = TRUE
```

**è¯´æ˜**:
- ç»Ÿè®¡æ‰€æœ‰è¢«æ ‡è®°ä¸ºé‡å¤çš„è¿›çº¿æ•°
- åŒ…æ‹¬å½“æ—¥é‡å¤å’Œå†å²é‡å¤

---

### 14. å»é‡èŒƒå›´
- **å­—æ®µå**: `dedup_scope`
- **ç±»å‹**: `VARCHAR(20)`
- **è¯´æ˜**: è¿›çº¿å»é‡çš„èŒƒå›´è®¾ç½®
- **å¯é€‰å€¼**:
  - `å½“å‰æ¿€æ´»ç ` - ä»…åœ¨è¯¥åˆ†ç»„å†…å»é‡
  - `å…¨å±€` - è·¨æ‰€æœ‰åˆ†ç»„å»é‡

**æ˜¾ç¤ºæ–¹å¼**:
```
å½“å‰æ¿€æ´»ç 
å…¨å±€
```

**ä¸šåŠ¡é€»è¾‘**:
- å½“æ–°è¿›çº¿æ—¶ï¼Œæ ¹æ®å»é‡èŒƒå›´åˆ¤æ–­è¯¥LineIDæ˜¯å¦å·²å­˜åœ¨äºåº•åº“
- å½±å“"é‡å¤è¿›çº¿"çš„ç»Ÿè®¡
- å®¢æˆ·åˆ—è¡¨ï¼ˆè¿›çº¿æ—¥å¿—ï¼‰å§‹ç»ˆä½¿ç”¨å…¨å±€å»é‡

---

### 15. åˆ›å»ºæ—¶é—´/æœ€è¿‘ç™»å½•
- **å­—æ®µå**: `created_at` / `last_login_at`
- **ç±»å‹**: `TIMESTAMP` / `TIMESTAMP`
- **è¯´æ˜**: 
  - **åˆ›å»ºæ—¶é—´**: åˆ†ç»„åˆ›å»ºæ—¶é—´
  - **æœ€è¿‘ç™»å½•**: Windowså®¢æˆ·ç«¯æœ€åä¸€æ¬¡ä½¿ç”¨è¯¥æ¿€æ´»ç ç™»å½•çš„æ—¶é—´

**æ˜¾ç¤ºæ–¹å¼**: ä¸¤è¡Œæ˜¾ç¤º
```
2025-12-21 18:30:52
2025-12-21 20:15:30
```

æˆ–å•è¡Œæ˜¾ç¤ºï¼š
```
2025-12-21 18:30:52 ~ 2025-12-21 20:15:30
```

---

### 16. æ“ä½œ
- **å­—æ®µå**: -
- **ç±»å‹**: æŒ‰é’®ç»„
- **è¯´æ˜**: å¯¹è¯¥åˆ†ç»„çš„æ“ä½œ

**æ“ä½œæŒ‰é’®**:
```
[ğŸ‘ï¸ æŸ¥çœ‹] [âœï¸ ç¼–è¾‘] [ğŸš« ç¦ç”¨]
```

**åŠŸèƒ½è¯´æ˜**:
- **æŸ¥çœ‹**: æŸ¥çœ‹è¯¥åˆ†ç»„çš„è¯¦ç»†ä¿¡æ¯å’ŒLineè´¦å·åˆ—è¡¨
- **ç¼–è¾‘**: ç¼–è¾‘åˆ†ç»„ä¿¡æ¯ï¼ˆå¤‡æ³¨ã€è¯´æ˜ã€å»é‡èŒƒå›´ç­‰ï¼‰
- **ç¦ç”¨**: ç¦ç”¨è¯¥åˆ†ç»„ï¼ˆç¦ç”¨åæ¿€æ´»ç æ— æ³•ç™»å½•ï¼‰

---

## ğŸ“± åˆ—è¡¨é¡µé¢å¸ƒå±€

### é¡µé¢ç»“æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ çº¿ç´¢åˆ—è¡¨ï¼ˆæ€»çœ‹æ¿ï¼‰                                       â”‚
â”‚  è¯´æ˜ï¼šå·¥å•é“¾æ¥å¯æŒ‰ç…§ä¸åŒç»´åº¦è¿›è¡Œåˆ†äº«é“¾æ¥ï¼Œæ¯ä¸ªæ¿€æ´»ç ä¸‹çš„æ¯ä¸ªâ”‚
â”‚        å¹³å°å³æ˜¯ä¸€ä¸ªå·¥å•                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  [ç­›é€‰åŒºåŸŸ]                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚å¼€å§‹æ—¶é—´ï½â”‚ æ¿€æ´»ç    â”‚ å¤‡æ³¨ä¿¡æ¯ â”‚ å¯ç”¨çŠ¶æ€ â”‚              â”‚
â”‚  â”‚æˆªæ­¢æ—¶é—´  â”‚          â”‚          â”‚          â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                               â”‚
â”‚  [ğŸ” æœç´¢]  [ğŸ”„ é‡é€‰]                                        â”‚
â”‚                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  [æ“ä½œæŒ‰é’®åŒºåŸŸ]                                               â”‚
â”‚  [æ¿€æ´»ç åˆ†ç»„ â–¼] [â• æ–°å¢æ¿€æ´»ç ] [ğŸ“¦ æ‰¹é‡æ“ä½œ â–¼]              â”‚
â”‚                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  [æ•°æ®è¡¨æ ¼]                                                   â”‚
â”‚  â”Œâ”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â” â”‚
â”‚  â”‚â˜‘â”‚æ¿€æ´»ç   â”‚-â”‚çŠ¶æ€â”‚å ç”¨  â”‚åœ¨çº¿  â”‚å¤‡æ³¨â”‚è¯´æ˜â”‚Lineâ”‚LB  â”‚ä»Šæ—¥â”‚æ€»è®¡â”‚é‡å¤â”‚å»é‡â”‚æ“ä½œâ”‚
â”‚  â”œâ”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤
â”‚  â”‚â˜â”‚TF6AwzwTâ”‚+â”‚æ­£å¸¸â”‚0/ä¸é™â”‚0/0   â”‚å¾·åâ”‚ â„¹ï¸ â”‚287 â”‚235 â”‚120 â”‚5000â”‚150 â”‚å½“å‰â”‚æŸ¥çœ‹â”‚
â”‚  â”‚â˜â”‚vv2NMw8Jâ”‚+â”‚æ­£å¸¸â”‚0/ä¸é™â”‚0/0   â”‚... â”‚ - â”‚150 â”‚80  â”‚56  â”‚3200â”‚80  â”‚å…¨å±€â”‚æŸ¥çœ‹â”‚
â”‚  â”‚â˜â”‚y2E7uw29â”‚+â”‚æ­£å¸¸â”‚6/100 â”‚6/6   â”‚... â”‚ â„¹ï¸ â”‚200 â”‚150 â”‚30  â”‚1500â”‚50  â”‚å½“å‰â”‚æŸ¥çœ‹â”‚
â”‚  â””â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜
â”‚                                                               â”‚
â”‚  å…± 38 æ¡    [10æ¡/é¡µ â–¼]  [â—€] [1][2][3][4] [â–¶]              â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‚ å±•å¼€/æŠ˜å åŠŸèƒ½

### æŠ˜å çŠ¶æ€ï¼ˆé»˜è®¤ï¼‰
æ˜¾ç¤ºæ¿€æ´»ç çš„æ±‡æ€»ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ‰€æœ‰Lineè´¦å·çš„æ±‡æ€»æ•°æ®ã€‚

### å±•å¼€çŠ¶æ€ï¼ˆæ–¹æ¡ˆBï¼‰
ç‚¹å‡» `-` æŒ‰é’®åï¼Œå±•å¼€æ˜¾ç¤ºè¯¥æ¿€æ´»ç ï¼ˆåˆ†ç»„ï¼‰ä¸‹æ‰€æœ‰Lineè´¦å·çš„è¯¦ç»†åˆ—è¡¨ï¼š

**å±•å¼€åæ˜¾ç¤º**:
```
â”Œâ”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”
â”‚â˜â”‚TF6AwzwTâ”‚-â”‚æ­£å¸¸â”‚6/ä¸é™â”‚6/6   â”‚å¾·åâ”‚120  â”‚5000 â”‚150 â”‚...â”‚
â”œâ”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”¤
â”‚  â”‚  â””â”€ Lineè´¦å·1  â”‚åœ¨çº¿ â”‚3/3   â”‚    â”‚10   â”‚150  â”‚5   â”‚   â”‚
â”‚  â”‚     @line001    â”‚     â”‚      â”‚    â”‚     â”‚     â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€ Lineè´¦å·2  â”‚ç¦»çº¿ â”‚0/0   â”‚    â”‚5    â”‚80   â”‚2   â”‚   â”‚
â”‚  â”‚     @line002    â”‚     â”‚      â”‚    â”‚     â”‚     â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€ Lineè´¦å·3  â”‚åœ¨çº¿ â”‚3/3   â”‚    â”‚8    â”‚200  â”‚3   â”‚   â”‚
â”‚  â”‚     dk36289     â”‚     â”‚      â”‚    â”‚     â”‚     â”‚    â”‚   â”‚
â””â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”˜
```

### å±•å¼€å†…å®¹å­—æ®µ

**æ¯ä¸ªLineè´¦å·æ˜¾ç¤º**:
- **Lineè´¦å·åç§°**: æ˜¾ç¤ºåç§°æˆ–Line ID
  - ç¬¬ä¸€è¡Œï¼šæ˜¾ç¤ºåç§°ï¼ˆå¦‚"Lineè´¦å·1"ï¼‰
  - ç¬¬äºŒè¡Œï¼šLine IDï¼ˆå¦‚"@line001"ï¼‰
- **åœ¨çº¿çŠ¶æ€**: åœ¨çº¿/ç¦»çº¿/å¼‚å¸¸ç¦»çº¿
- **å ç”¨**: è¯¥è´¦å·çš„å ç”¨æ•°ï¼ˆå¯é€‰ï¼‰
- **å½“æ—¥è¿›çº¿**: è¯¥Lineè´¦å·ä»Šæ—¥çš„è¿›çº¿æ•°
- **æ€»è¿›çº¿**: è¯¥Lineè´¦å·çš„å†å²æ€»è¿›çº¿æ•°
- **é‡å¤è¿›çº¿**: è¯¥Lineè´¦å·çš„é‡å¤è¿›çº¿æ•°

### å±•å¼€æ ·å¼
- å­è¡Œç¼©è¿›æˆ–æ·»åŠ  `â””â”€` ç¬¦å·
- å­è¡ŒèƒŒæ™¯è‰²ä¸çˆ¶è¡ŒåŒºåˆ†
- ä»…æ˜¾ç¤ºæœ‰è´¦å·çš„åˆ†ç»„ï¼ˆæ€»è´¦å·>0ï¼‰
- æŒ‰åœ¨çº¿çŠ¶æ€æ’åºï¼ˆåœ¨çº¿ä¼˜å…ˆï¼‰

---

## ğŸ’¾ ç»Ÿè®¡æ•°æ®å­˜å‚¨ï¼ˆå¢é‡æ›´æ–°æ–¹æ¡ˆï¼‰

### è¯´æ˜
ä¸ºé¿å…å®æ—¶è®¡ç®—å¸¦æ¥çš„æ•°æ®åº“å‹åŠ›ï¼Œé‡‡ç”¨**å¢é‡æ›´æ–°**æ–¹æ¡ˆï¼š
- ä½¿ç”¨ç»Ÿè®¡ç¼“å­˜è¡¨å­˜å‚¨é¢„è®¡ç®—ç»“æœ
- å½“æœ‰æ•°æ®å˜åŒ–æ—¶ï¼Œç›´æ¥å¯¹ç»Ÿè®¡æ•°æ® +1 æˆ– -1
- å®šæœŸå…¨é‡æ ¡å‡†é˜²æ­¢æ•°æ®æ¼‚ç§»

è¯¦ç»†æ–¹æ¡ˆè¯·å‚è€ƒï¼š[è¿›çº¿ç»Ÿè®¡å¢é‡æ›´æ–°æ–¹æ¡ˆ.md](è¿›çº¿ç»Ÿè®¡å¢é‡æ›´æ–°æ–¹æ¡ˆ.md)

### ç»Ÿè®¡ç¼“å­˜è¡¨

#### group_statsï¼ˆåˆ†ç»„ç»Ÿè®¡è¡¨ï¼‰
```sql
CREATE TABLE group_stats (
    id SERIAL PRIMARY KEY,
    group_id INTEGER NOT NULL REFERENCES groups(id) ON DELETE CASCADE,
    
    -- è´¦å·ç»Ÿè®¡
    total_accounts INTEGER DEFAULT 0,
    online_accounts INTEGER DEFAULT 0,
    line_accounts INTEGER DEFAULT 0,
    line_business_accounts INTEGER DEFAULT 0,
    
    -- è¿›çº¿ç»Ÿè®¡
    today_incoming INTEGER DEFAULT 0,
    total_incoming INTEGER DEFAULT 0,
    duplicate_incoming INTEGER DEFAULT 0,
    
    -- é‡ç½®ä¿¡æ¯
    last_reset_date DATE,
    last_reset_time TIMESTAMP,
    
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(group_id)
);
```

#### line_account_statsï¼ˆLineè´¦å·ç»Ÿè®¡è¡¨ï¼‰
```sql
CREATE TABLE line_account_stats (
    id SERIAL PRIMARY KEY,
    line_account_id INTEGER NOT NULL REFERENCES line_accounts(id) ON DELETE CASCADE,
    
    -- è¿›çº¿ç»Ÿè®¡
    today_incoming INTEGER DEFAULT 0,
    total_incoming INTEGER DEFAULT 0,
    duplicate_incoming INTEGER DEFAULT 0,
    
    -- é‡ç½®ä¿¡æ¯
    last_reset_date DATE,
    last_reset_time TIMESTAMP,
    
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(line_account_id)
);
```

### ä¼˜åŒ–åçš„æŸ¥è¯¢SQL

```sql
-- çº¿ç´¢åˆ—è¡¨æŸ¥è¯¢ï¼ˆæç®€ï¼Œé«˜æ€§èƒ½ï¼‰
SELECT 
    g.*,
    gs.total_accounts,
    gs.online_accounts,
    gs.line_accounts,
    gs.line_business_accounts,
    gs.today_incoming,
    gs.total_incoming,
    gs.duplicate_incoming
FROM groups g
LEFT JOIN group_stats gs ON gs.group_id = g.id
WHERE g.deleted_at IS NULL;

-- å±•å¼€åæŸ¥è¯¢Lineè´¦å·åˆ—è¡¨
SELECT 
    la.*,
    las.today_incoming,
    las.total_incoming,
    las.duplicate_incoming
FROM line_accounts la
LEFT JOIN line_account_stats las ON las.line_account_id = la.id
WHERE la.group_id = {group_id} AND la.deleted_at IS NULL
ORDER BY 
    CASE WHEN la.online_status = 'online' THEN 1 ELSE 2 END,
    las.total_incoming DESC;
```

**æ€§èƒ½ä¼˜åŠ¿**:
- æ— å¤æ‚JOINå’ŒGROUP BY
- æŸ¥è¯¢é€Ÿåº¦å¿«ä¸”ç¨³å®š
- ä¸å—æ•°æ®é‡å½±å“

---

## ğŸ”„ å®æ—¶æ›´æ–°

### æ•°æ®è‡ªåŠ¨åˆ·æ–°
- é¡µé¢åŠ è½½æ—¶è·å–æ•°æ®
- WebSocketæ¨é€å®æ—¶æ›´æ–°
- å½“è´¦å·ä¸Šä¸‹çº¿æ—¶ï¼Œè‡ªåŠ¨æ›´æ–°ç»Ÿè®¡æ•°æ®
- å½“æ–°å¢/åˆ é™¤è´¦å·æ—¶ï¼Œè‡ªåŠ¨æ›´æ–°ç»Ÿè®¡æ•°æ®

### æ¨é€æ¶ˆæ¯æ ¼å¼
```json
{
  "type": "group_stats_update",
  "data": {
    "group_id": 1,
    "activation_code": "TF6AwzwT",
    "online_count": 10,
    "total_count": 12,
    "line_count": 7,
    "line_business_count": 5
  }
}
```

---

## ğŸ¯ ä¸å…¶ä»–é¡µé¢çš„å…³ç³»

### ä¸åˆ†ç»„ç®¡ç†çš„å…³ç³»
- **åˆ†ç»„ç®¡ç†**ï¼šç®¡ç†æ¿€æ´»ç çš„åŸºæœ¬ä¿¡æ¯ï¼ˆCRUDæ“ä½œï¼‰
- **çº¿ç´¢åˆ—è¡¨ï¼ˆæ€»çœ‹æ¿ï¼‰**ï¼šå±•ç¤ºæ‰€æœ‰æ¿€æ´»ç çš„ç»Ÿè®¡æ•°æ®å’Œå®æ—¶çŠ¶æ€

### ä¸è´¦å·åˆ—è¡¨çš„å…³ç³»
- **è´¦å·åˆ—è¡¨**ï¼šå±•ç¤ºæ‰€æœ‰Lineè´¦å·çš„è¯¦ç»†ä¿¡æ¯
- **çº¿ç´¢åˆ—è¡¨**ï¼šå±•ç¤ºæŒ‰æ¿€æ´»ç åˆ†ç»„çš„æ±‡æ€»ç»Ÿè®¡

### é¡µé¢è·³è½¬
- ç‚¹å‡»æ¿€æ´»ç  â†’ è·³è½¬åˆ°è¯¥åˆ†ç»„çš„è¯¦ç»†é¡µé¢ï¼ˆç±»ä¼¼åˆ†ç»„è¯¦æƒ…ï¼‰
- ç‚¹å‡»"æŸ¥çœ‹"æŒ‰é’® â†’ è·³è½¬åˆ°è¯¥åˆ†ç»„çš„è´¦å·åˆ—è¡¨

---

## âœ… å·²ç¡®è®¤éœ€æ±‚

- [x] é¡µé¢ç­›é€‰åŠŸèƒ½
- [x] åŠŸèƒ½æŒ‰é’®ï¼ˆç§»é™¤åˆ†äº«å’Œå¯¼å‡ºï¼‰
- [x] åˆ—è¡¨å­—æ®µå®šä¹‰ï¼ˆä¿ç•™Lineç›¸å…³å­—æ®µ + æ–°å¢è¿›çº¿å­—æ®µï¼‰
- [x] å±•å¼€/æŠ˜å åŠŸèƒ½ï¼ˆå±•å¼€æ˜¾ç¤ºLineè´¦å·åˆ—è¡¨ï¼‰
- [x] æ•°æ®ç»Ÿè®¡é€»è¾‘ï¼ˆåŒ…å«è¿›çº¿ç»Ÿè®¡ï¼‰
- [x] å®æ—¶æ›´æ–°æœºåˆ¶
- [x] è¿›çº¿å­—æ®µï¼šå½“æ—¥è¿›çº¿ã€æ€»è¿›çº¿ã€é‡å¤è¿›çº¿
- [x] å»é‡èŒƒå›´ï¼šå½“å‰æ¿€æ´»ç ã€å…¨å±€ä¸¤ç§
- [x] æ‰¹é‡æ“ä½œåŠŸèƒ½ï¼šç¦ç”¨/å¯ç”¨ã€ä¿®æ”¹ç½®é›¶æ—¶é—´ã€ä¿®æ”¹å»é‡èŒƒå›´ã€åˆ†ç»„å½’ç±»


