# Line账号管理系统 - 用户使用手册

## 📋 概述

欢迎使用Line账号分组管理与进线统计系统。本手册将指导您完成系统设置、账号管理和日常操作。

## 👥 用户角色说明

### 管理员（Admin）
- **权限**: 完全管理权限
- **功能**: 用户管理、大模型配置、系统设置
- **界面**: 管理后台（完整的左侧菜单）

### 普通用户（User）
- **权限**: 分组管理和数据查看
- **功能**: 创建分组、管理Line账号、查看统计
- **界面**: 管理后台（分组管理相关功能）

### 子账号（SubAccount）
- **权限**: 查看所属分组数据
- **功能**: 查看统计数据、账号状态
- **界面**: 子账号后台（只读模式）

## 🚀 快速开始

### 1. 账号登录

#### 管理员/普通用户登录
1. 访问系统首页
2. 点击"管理员登录"按钮
3. 输入用户名和密码：
   - **默认管理员账号**: `admin` / `admin123`
4. 点击"登录"

#### 子账号登录
1. 访问系统首页
2. 点击"子账号登录"按钮
3. 输入激活码和密码（如果分组设置了密码）
4. 点击"登录"

### 2. 首次使用设置

⚠️ **重要**: 首次部署后请立即修改默认管理员密码！

#### 修改管理员密码
1. 登录管理员账号
2. 点击左侧菜单"用户管理"
3. 找到admin用户，点击编辑
4. 修改密码
5. 保存

#### 创建普通用户（管理员操作）
1. 点击左侧菜单"用户管理"
2. 点击"新增用户"
3. 填写用户信息：
   - 用户名
   - 密码
   - 邮箱（可选）
   - 最大分组数（可选）
4. 保存

## 📊 核心功能使用指南

### 分组管理

#### 创建分组
1. 点击左侧菜单"分组管理"
2. 点击"新增分组"按钮
3. 填写分组信息：
   - **分组名称**: 必填
   - **描述**: 可选
   - **分类**: 用于分组组织
   - **账号限制**: 限制该分组下的Line账号数量
   - **去重范围**: `current`(当前分组) 或 `global`(全局)
   - **重置时间**: 每日统计重置时间
   - **登录密码**: 子账号登录密码（可选）
4. 点击"确定"

系统会自动生成8位激活码，用于Windows客户端连接。

#### 编辑分组
1. 在分组列表中点击"编辑"按钮
2. 修改分组信息
3. 保存

#### 删除分组
1. 点击分组行的删除按钮
2. 确认删除

⚠️ **注意**: 删除分组会同时删除该分组下的所有账号和数据！

#### 重新生成激活码
1. 点击分组行的"重新生成激活码"按钮
2. 确认操作

### Line账号管理

#### 添加Line账号
1. 点击左侧菜单"账号列表"
2. 点击"新增账号"按钮
3. 填写账号信息：
   - **分组**: 选择所属分组
   - **平台类型**: Line或Line商务
   - **Line ID**: Line账号ID（如 @abc123）
   - **显示名称**: 账号显示名称
   - **手机号**: 可选
   - **账号备注**: 可选
   - **重置时间**: 可选（留空则使用分组重置时间）
4. 点击"确定"

#### 批量操作
- **批量删除**: 勾选账号，点击"批量删除"
- **批量更新**: 勾选账号，点击"批量更新"
- **强制下线**: 勾选在线账号，点击"强制下线"

#### 生成二维码
1. 点击账号行的"二维码"按钮
2. 系统会生成Line添加好友链接的二维码
3. 可以预览和下载二维码图片

### 进线统计查看

#### 总看板（线索列表）
1. 点击左侧菜单"线索列表"
2. 查看统计卡片：
   - **总进线**: 累计进线数量
   - **今日进线**: 今日进线数量
   - **重复进线**: 重复进线总数
   - **今日重复**: 今日重复进线数

#### 筛选和搜索
- **分组筛选**: 选择特定分组
- **时间范围**: 选择开始和结束时间
- **重复状态**: 查看重复或非重复进线
- **搜索**: 按Line ID或显示名称搜索

#### 查看详情
1. 点击进线记录行的展开按钮
2. 查看详细信息：
   - 头像
   - 手机号
   - 账号信息
   - 分组信息

### 底库管理

#### 导入联系人
1. 点击左侧菜单"底库管理"
2. 点击"导入联系人"按钮
3. 选择文件：
   - **支持格式**: Excel(.xlsx)、CSV(.csv)、TXT(.txt)
   - **文件要求**: 包含line_id列
4. 配置导入选项：
   - **平台类型**: Line或Line商务
   - **去重范围**: current或global
   - **分组选择**: 导入到底库的分组
5. 点击"开始导入"

#### 查看导入历史
1. 在底库管理页面点击"导入批次"标签页
2. 查看所有导入记录
3. 查看导入统计：
   - 总数
   - 成功数
   - 重复数
   - 错误数

### 客户管理

#### 查看客户列表
1. 点击左侧菜单"客户列表"
2. 筛选客户：
   - 按分组筛选
   - 按客户类型筛选
   - 搜索客户
3. 查看客户信息：
   - ID、头像、显示名称
   - 平台、激活码、客户类型
   - 手机号、创建时间

#### 编辑客户信息
1. 点击客户行的编辑按钮
2. 修改客户信息
3. 保存

#### 查看跟进记录
1. 点击客户行的"跟进记录"按钮
2. 跳转到跟进记录页面并自动筛选该客户

### 跟进记录管理

#### 添加跟进记录
1. 点击左侧菜单"跟进记录"
2. 点击"新增记录"按钮
3. 选择分组、平台、Line账号
4. 选择客户（可选）
5. 输入跟进内容
6. 保存

#### 编辑跟进记录
1. 点击跟进记录行的编辑按钮
2. 修改内容
3. 保存

#### 从客户页面跳转
1. 在客户列表中点击"跟进记录"按钮
2. 自动跳转并筛选该客户的跟进记录

## 🤖 大模型功能（管理员专属）

### 配置大模型
1. 点击左侧菜单"大模型配置"
2. 点击"新增配置"
3. 选择提供商：
   - **OpenAI**: GPT系列
   - **Claude**: Anthropic Claude
   - **通义千问**: 阿里云
   - **自定义**: 其他兼容OpenAI接口的提供商
4. 填写配置信息：
   - 配置名称
   - API Key
   - 基础URL
   - 模型名称
   - 参数设置（温度、最大Token等）
5. 点击"测试连接"
6. 保存配置

### 创建Prompt模板
1. 在大模型配置页面点击"Prompt模板"标签页
2. 点击"新增模板"
3. 填写模板信息：
   - 模板名称
   - 关联配置
   - 模板内容（支持变量，如 `{{customer_name}}`）
   - 变量定义
   - 描述
4. 保存

### 查看调用记录
1. 点击左侧菜单"大模型调用记录"
2. 查看调用历史：
   - 筛选条件：配置、模板、激活码、状态、时间范围
   - 查看详情：请求参数、响应内容、Token统计
   - 查看统计：总调用次数、成功率、Token消耗

## 📱 子账号使用指南

### 子账号界面特点
- **只读模式**: 只能查看数据，不能修改
- **数据隔离**: 只能查看所属分组的数据
- **简化界面**: 只显示统计和查看功能

### 查看统计数据
1. 使用激活码登录子账号界面
2. 查看分组统计卡片
3. 查看账号在线状态
4. 查看进线统计

## 🔧 系统设置

### 修改个人密码
管理员和普通用户可以修改自己的密码。

### 用户管理（管理员）
1. 点击"用户管理"
2. 添加、编辑、删除普通用户
3. 设置用户分组限制

## 📊 数据导出和备份

### 数据备份
系统会自动备份重要数据，但建议定期手动备份：
- 数据库数据
- 配置文件
- 上传的文件

### 查看系统日志
- 后端日志：`backend/logs/app.log`
- 数据库日志：通过管理工具查看

## ❗ 常见问题

### 登录问题

**Q: 忘记密码怎么办？**
A: 管理员可以重置普通用户密码，子账号密码由分组设置决定。

**Q: 子账号无法登录？**
A: 检查激活码是否正确，确认分组是否激活且设置了密码。

### 数据问题

**Q: 统计数据不准确？**
A: 系统有定时校准任务，通常在凌晨自动校准。如有问题请联系管理员。

**Q: 账号显示离线但实际上在线？**
A: Windows客户端可能断线，系统每5分钟检测一次离线状态。

### 性能问题

**Q: 系统变慢怎么办？**
A: 检查数据库连接数，清理过期日志，重启服务。

**Q: 页面加载慢？**
A: 清除浏览器缓存，检查网络连接。

## 📞 技术支持

如遇到问题，请：

1. 查看系统日志
2. 检查网络连接
3. 重启相关服务
4. 联系技术支持

## 🔄 系统更新

系统更新时：
1. 备份数据
2. 停止服务
3. 更新代码
4. 执行数据库迁移
5. 重启服务
6. 验证功能

---

最后更新：2025-12-24
