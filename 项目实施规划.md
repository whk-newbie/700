# Lineè´¦å·ç®¡ç†ç³»ç»Ÿ - é¡¹ç›®å®æ–½è§„åˆ’

> **ç‰ˆæœ¬**: v2.0
> **æ›´æ–°æ—¥æœŸ**: 2025-12-22
> **æŠ€æœ¯æ ˆ**: Go + Vue3 + Element Plus + PostgreSQL + Redis

---

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®åç§°
Lineè´¦å·åˆ†ç»„ç®¡ç†ä¸è¿›çº¿ç»Ÿè®¡ç³»ç»Ÿ

### æ ¸å¿ƒåŠŸèƒ½
- åˆ†ç»„ï¼ˆæ¿€æ´»ç ï¼‰ç®¡ç†
- Lineè´¦å·ç®¡ç†ä¸ç›‘æ§
- è¿›çº¿ç»Ÿè®¡ä¸å»é‡
- åº•åº“ç®¡ç†
- å®¢æˆ·ç®¡ç†
- è·Ÿè¿›è®°å½•

### æŠ€æœ¯æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           å‰ç«¯å±‚ï¼ˆVue3ï¼‰                     â”‚
â”‚   Vue3 + Element Plus + Pinia + Axios       â”‚
â”‚   - ç®¡ç†åå°ï¼ˆç®¡ç†å‘˜/æ™®é€šç”¨æˆ·ï¼‰              â”‚
â”‚   - å­è´¦å·åå°ï¼ˆåˆ†ç»„æ•°æ®ï¼‰                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ HTTP/WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           åç«¯å±‚ï¼ˆGoï¼‰                       â”‚
â”‚   Gin + GORM + WebSocket + JWT              â”‚
â”‚   - RESTful API                             â”‚
â”‚   - WebSocketæœåŠ¡ï¼ˆ800+å¹¶å‘ï¼‰                â”‚
â”‚   - æƒé™æ§åˆ¶                                 â”‚
â”‚   - å®šæ—¶ä»»åŠ¡                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
    â”‚ PostgreSQL â”‚   â”‚   Redis   â”‚
    â”‚  ä¸»å­˜å‚¨    â”‚   â”‚   ç¼“å­˜    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“… å¼€å‘é˜¶æ®µè§„åˆ’ï¼ˆ14å‘¨ï¼‰

### ç¬¬1å‘¨ï¼šé¡¹ç›®åˆå§‹åŒ–

#### åç«¯åˆå§‹åŒ–
- [x] åˆ›å»ºGoé¡¹ç›®ç»“æ„
- [x] é…ç½®Ginæ¡†æ¶
- [x] é›†æˆGORM
- [x] é…ç½®PostgreSQLè¿æ¥
- [x] é…ç½®Redisè¿æ¥
- [x] è®¾ç½®ç¯å¢ƒå˜é‡ç®¡ç†ï¼ˆviperï¼‰
- [x] é…ç½®æ—¥å¿—ç³»ç»Ÿï¼ˆzapï¼‰
- [x] ç¼–å†™Dockerfile

#### å‰ç«¯åˆå§‹åŒ–
- [x] åˆ›å»ºVue3é¡¹ç›®ï¼ˆViteï¼‰
- [x] å®‰è£…Element Plus
- [x] é…ç½®Vue Router
- [x] é…ç½®PiniaçŠ¶æ€ç®¡ç†
- [x] é…ç½®Axiosè¯·æ±‚å°è£…
- [x] é…ç½®ä»£ç†å’Œç¯å¢ƒå˜é‡
- [x] è®¾è®¡åŸºç¡€å¸ƒå±€
- [x] åˆ›å»ºæ‰€æœ‰APIå°è£…æ–‡ä»¶ï¼ˆ9ä¸ªæ¨¡å—ï¼‰
- [x] åˆ›å»ºç™»å½•é¡µé¢ï¼ˆç®¡ç†å‘˜/å­è´¦å·ï¼‰
- [x] åˆ›å»ºç®¡ç†åå°å¸ƒå±€å’Œå­è´¦å·å¸ƒå±€
- [x] åˆ›å»ºåŸºç¡€é¡µé¢ç»„ä»¶å ä½
- [x] åˆ›å»ºå·¥å…·å‡½æ•°ï¼ˆæ ¼å¼åŒ–ã€WebSocketã€è®¤è¯ç­‰ï¼‰
- [x] é…ç½®.gitignoreå¹¶ç§»é™¤éœ€æ±‚æ–¹æ¡ˆæ–‡æ¡£

#### æ•°æ®åº“åˆå§‹åŒ–
- [x] åˆ›å»ºæ•°æ®åº“
- [x] æ‰§è¡Œè¡¨ç»“æ„SQLï¼ˆ14å¼ è¡¨ï¼‰
- [x] åˆ›å»ºåˆ†åŒºè¡¨
- [x] åˆ›å»ºç´¢å¼•å’Œè§¦å‘å™¨
- [x] åˆ›å»ºè§†å›¾
- [x] æ’å…¥åˆå§‹ç®¡ç†å‘˜è´¦å·
- [x] ç¼–å†™æ•°æ®åº“è¿ç§»è„šæœ¬

---

### ç¬¬2å‘¨ï¼šè®¤è¯ä¸æƒé™ç³»ç»Ÿ

#### åç«¯å¼€å‘
- [x] JWT Tokenç”Ÿæˆä¸éªŒè¯
- [x] ä¸‰ç§ç™»å½•æ–¹å¼å®ç°
  - ç”¨æˆ·å+å¯†ç ï¼ˆç®¡ç†å‘˜/æ™®é€šç”¨æˆ·ï¼‰
  - æ¿€æ´»ç +å¯†ç ï¼ˆå­è´¦å·ï¼‰
- [x] æƒé™ä¸­é—´ä»¶
  - AdminRequired
  - UserRequired
  - SubAccountRequired
- [x] æ•°æ®è¿‡æ»¤ä¸­é—´ä»¶ï¼ˆæ ¹æ®è§’è‰²è¿‡æ»¤æ•°æ®ï¼‰
- [x] Sessionç®¡ç†ï¼ˆä½¿ç”¨Rediså­˜å‚¨ä¼šè¯ï¼Œæ”¯æŒTokené»‘åå•ã€æ´»è·ƒä¼šè¯æŸ¥è¯¢ï¼‰

#### å‰ç«¯å¼€å‘
- [x] ç™»å½•é¡µé¢ï¼ˆç®¡ç†å‘˜/å­è´¦å·ï¼‰
- [x] ç™»å½•é€»è¾‘ï¼ˆAxiosæ‹¦æˆªå™¨ï¼‰
- [x] Tokenå­˜å‚¨ï¼ˆlocalStorageï¼‰
- [x] è·¯ç”±å®ˆå«ï¼ˆæƒé™æ£€æŸ¥ï¼‰
- [x] ç”¨æˆ·ä¿¡æ¯çŠ¶æ€ç®¡ç†ï¼ˆPiniaï¼‰

#### APIæ¥å£
- [x] POST /api/auth/login - ç”¨æˆ·ç™»å½•
- [x] POST /api/auth/login-subaccount - å­è´¦å·ç™»å½•
- [x] POST /api/auth/logout - ç™»å‡º
- [x] GET /api/auth/me - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
- [x] POST /api/auth/refresh - åˆ·æ–°Token

---

### ç¬¬3å‘¨ï¼šåˆ†ç»„ç®¡ç†æ¨¡å—

#### åç«¯å¼€å‘
- [x] åˆ†ç»„CRUD Serviceå±‚
- [x] åˆ†ç»„APIæ¥å£
  - [x] GET /api/groups - åˆ—è¡¨ï¼ˆåˆ†é¡µã€ç­›é€‰ï¼‰
  - [x] POST /api/groups - åˆ›å»ºï¼ˆè‡ªåŠ¨ç”Ÿæˆæ¿€æ´»ç ï¼‰
  - [x] PUT /api/groups/:id - æ›´æ–°
  - [x] DELETE /api/groups/:id - åˆ é™¤ï¼ˆè½¯åˆ é™¤ï¼‰
  - [x] POST /api/groups/:id/regenerate-code - é‡æ–°ç”Ÿæˆæ¿€æ´»ç 
  - [x] GET /api/groups/categories - è·å–åˆ†ç»„åˆ†ç±»åˆ—è¡¨
- [x] åˆ›å»ºåˆ†ç»„æ—¶åˆå§‹åŒ–group_stats
- [x] åˆ†ç»„å½’ç±»ç®¡ç†ï¼ˆåˆ†ç±»æŸ¥è¯¢åŠŸèƒ½ï¼‰
- [x] æ‰¹é‡æ“ä½œæ¥å£
  - [x] POST /api/groups/batch/delete - æ‰¹é‡åˆ é™¤åˆ†ç»„
  - [x] POST /api/groups/batch/update - æ‰¹é‡æ›´æ–°åˆ†ç»„

#### å‰ç«¯å¼€å‘
- [x] åˆ†ç»„ç®¡ç†é¡µé¢
  - [x] ç­›é€‰åŒºåŸŸï¼ˆçŠ¶æ€ã€æœç´¢ï¼‰
  - [x] æ•°æ®è¡¨æ ¼ï¼ˆæ˜¾ç¤ºåˆ†ç»„ä¿¡æ¯ã€ç»Ÿè®¡ä¿¡æ¯ï¼‰
  - [x] æ–°å¢/ç¼–è¾‘å¯¹è¯æ¡†
  - [x] æ‰¹é‡æ“ä½œï¼ˆæ‰¹é‡åˆ é™¤ã€æ‰¹é‡æ›´æ–°ï¼‰
  - [x] æŸ¥çœ‹æŒ‰é’®ï¼ˆè·³è½¬åˆ°è´¦å·åˆ—è¡¨ï¼‰
  - [x] é‡æ–°ç”Ÿæˆæ¿€æ´»ç åŠŸèƒ½
  - [x] åˆ†é¡µåŠŸèƒ½
- [ ] åˆ†ç»„çŠ¶æ€å®æ—¶æ›´æ–°ï¼ˆéœ€ç­‰å¾…ç¬¬5å‘¨WebSocketæœåŠ¡ï¼‰

---

### ç¬¬4å‘¨ï¼šLineè´¦å·ç®¡ç†æ¨¡å—

#### åç«¯å¼€å‘ âœ…
- [x] Lineè´¦å·CRUD Serviceå±‚
- [x] Lineè´¦å·APIæ¥å£
  - [x] GET /api/v1/line-accounts - åˆ—è¡¨ï¼ˆç­›é€‰ã€åˆ†é¡µï¼‰
  - [x] POST /api/v1/line-accounts - åˆ›å»º
  - [x] PUT /api/v1/line-accounts/:id - æ›´æ–°
  - [x] DELETE /api/v1/line-accounts/:id - åˆ é™¤ï¼ˆè½¯åˆ é™¤ï¼‰
- [x] äºŒç»´ç ç”ŸæˆæœåŠ¡
  - [x] POST /api/v1/line-accounts/:id/generate-qrï¼ˆç”ŸæˆLineæ·»åŠ å¥½å‹é“¾æ¥äºŒç»´ç ï¼‰
- [x] åˆ›å»ºè´¦å·æ—¶åˆå§‹åŒ–line_account_stats
- [x] è´¦å·çŠ¶æ€æ›´æ–°ï¼ˆæ›´æ–°group_statsï¼‰
- [x] æ•°æ®è¿‡æ»¤ä¸­é—´ä»¶é›†æˆï¼ˆæ ¹æ®è§’è‰²è‡ªåŠ¨è¿‡æ»¤æ•°æ®ï¼‰
- [x] é™æ€æ–‡ä»¶æœåŠ¡é…ç½®ï¼ˆç”¨äºæä¾›äºŒç»´ç å›¾ç‰‡è®¿é—®ï¼‰

#### å‰ç«¯å¼€å‘ âœ…
- [x] è´¦å·åˆ—è¡¨é¡µé¢
  - [x] å¹³å°ç­›é€‰
  - [x] ç­›é€‰åŒºåŸŸï¼ˆåˆ†ç»„ã€åœ¨çº¿çŠ¶æ€ã€æœç´¢ï¼‰
  - [x] æ•°æ®è¡¨æ ¼ï¼ˆæ˜¾ç¤ºè´¦å·ä¿¡æ¯ã€ç»Ÿè®¡ä¿¡æ¯ï¼‰
  - [x] äºŒç»´ç é¢„è§ˆ
- [x] æ‰¹é‡æ“ä½œï¼ˆç§»é™¤ã€å¼ºåˆ¶ä¸‹çº¿ï¼‰
- [x] æ—¥å¿—è®°å½•å¼¹çª—
- [x] æ–°å¢/ç¼–è¾‘è´¦å·å¯¹è¯æ¡†
- [x] åˆ†é¡µåŠŸèƒ½
- [x] é”™è¯¯å¤„ç†å’ŒåŠ è½½çŠ¶æ€

---

### ç¬¬5å‘¨ï¼šWebSocketæœåŠ¡ï¼ˆæ ¸å¿ƒï¼‰âœ…

#### åç«¯å¼€å‘ âœ…
- [x] WebSocketè¿æ¥ç®¡ç†å™¨
  - è¿æ¥æ± ç®¡ç†
  - å¤šæ¿€æ´»ç æ”¯æŒ
  - è¿æ¥è®¤è¯
- [x] å¿ƒè·³æœºåˆ¶
  - 60ç§’å¿ƒè·³æ£€æµ‹
  - 65ç§’è¶…æ—¶å¤„ç†
- [x] æ¶ˆæ¯è·¯ç”±ä¸å¤„ç†
  - heartbeat - å¿ƒè·³
  - sync_line_accounts - åŒæ­¥è´¦å·
  - incoming - è¿›çº¿æ•°æ®
  - customer_sync - å®¢æˆ·ä¿¡æ¯
  - follow_up_sync - è·Ÿè¿›è®°å½•
  - account_status_change - çŠ¶æ€å˜åŒ–
- [x] æ¨é€æœåŠ¡ï¼ˆæœåŠ¡å™¨â†’å®¢æˆ·ç«¯ï¼‰
- [x] æ¨é€æœåŠ¡ï¼ˆæœåŠ¡å™¨â†’å‰ç«¯ï¼‰

#### WebSocketè·¯å¾„ âœ…
- [x] /api/ws/client - Windowså®¢æˆ·ç«¯è¿æ¥
- [x] /api/ws/dashboard - å‰ç«¯çœ‹æ¿è¿æ¥

---

### ç¬¬6å‘¨ï¼šè¿›çº¿ç»Ÿè®¡æ¨¡å—ï¼ˆæ ¸å¿ƒï¼‰âœ…

#### åç«¯å¼€å‘ âœ…
- [x] è¿›çº¿æ•°æ®å¤„ç†Serviceï¼ˆincoming_service.goï¼‰
  - [x] æ¥æ”¶è¿›çº¿æ•°æ®
  - [x] å»é‡åˆ¤æ–­ï¼ˆcurrent/globalï¼‰
  - [x] è®°å½•incoming_logs
  - [x] å¢é‡æ›´æ–°ç»Ÿè®¡è¡¨
  - [x] æ·»åŠ åˆ°åº•åº“ï¼ˆå¦‚æœä¸é‡å¤ï¼‰
- [x] å»é‡é€»è¾‘å®ç°ï¼ˆdedup_service.goï¼‰
  - [x] CheckDuplicateCurrent() - æ£€æŸ¥å½“å‰åˆ†ç»„å†…æ˜¯å¦é‡å¤
  - [x] CheckDuplicateGlobal() - æ£€æŸ¥å…¨å±€æ˜¯å¦é‡å¤
  - [x] CheckDuplicate() - æ ¹æ®åˆ†ç»„é…ç½®æ£€æŸ¥æ˜¯å¦é‡å¤
  - [x] CheckContactPoolDuplicate() - æ£€æŸ¥åº•åº“ä¸­æ˜¯å¦å·²å­˜åœ¨
- [x] ç»Ÿè®¡APIæ¥å£ï¼ˆstats_handler.goï¼‰
  - [x] GET /api/v1/stats/group/:id - åˆ†ç»„ç»Ÿè®¡
  - [x] GET /api/v1/stats/account/:id - è´¦å·ç»Ÿè®¡
  - [x] GET /api/v1/stats/overview - æ€»è§ˆç»Ÿè®¡
  - [x] GET /api/v1/stats/group/:id/trend - åˆ†ç»„è¿›çº¿è¶‹åŠ¿
  - [x] GET /api/v1/stats/account/:id/trend - è´¦å·è¿›çº¿è¶‹åŠ¿
  - [x] GET /api/v1/stats/incoming-logs - è¿›çº¿æ—¥å¿—åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µå’Œç­›é€‰ï¼‰
- [x] å®æ—¶æ¨é€ï¼ˆè¿›çº¿æ›´æ–°ï¼‰
  - [x] é€šè¿‡WebSocket Hubå¹¿æ’­è¿›çº¿æ›´æ–°åˆ°å‰ç«¯çœ‹æ¿
- [x] æ•°æ®æ¨¡å‹
  - [x] IncomingLogæ¨¡å‹ï¼ˆåˆ†åŒºè¡¨æ”¯æŒï¼‰
  - [x] ContactPoolæ¨¡å‹ï¼ˆåº•åº“æ¨¡å‹ï¼‰
- [x] ç»Ÿè®¡æœåŠ¡ï¼ˆstats_service.goï¼‰
  - [x] GetGroupStats() - è·å–åˆ†ç»„ç»Ÿè®¡
  - [x] GetAccountStats() - è·å–è´¦å·ç»Ÿè®¡
  - [x] GetOverviewStats() - è·å–æ€»è§ˆç»Ÿè®¡
  - [x] GetGroupIncomingTrend() - è·å–åˆ†ç»„è¿›çº¿è¶‹åŠ¿
  - [x] GetAccountIncomingTrend() - è·å–è´¦å·è¿›çº¿è¶‹åŠ¿
- [x] è¿›çº¿æ—¥å¿—æœåŠ¡ï¼ˆincoming_service.goï¼‰
  - [x] GetIncomingLogList() - è·å–è¿›çº¿æ—¥å¿—åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µã€ç­›é€‰ã€æ•°æ®è¿‡æ»¤ï¼‰

#### å‰ç«¯å¼€å‘ âœ…
- [x] çº¿ç´¢åˆ—è¡¨é¡µé¢ï¼ˆæ€»çœ‹æ¿ï¼‰
  - [x] ç­›é€‰åŒºåŸŸï¼ˆåˆ†ç»„ã€æ—¶é—´èŒƒå›´ã€æ˜¯å¦é‡å¤ã€æœç´¢ï¼‰
  - [x] æ•°æ®è¡¨æ ¼ï¼ˆæ˜¾ç¤ºè¿›çº¿æ—¥å¿—ä¿¡æ¯ï¼‰
  - [x] å±•å¼€/æŠ˜å åŠŸèƒ½ï¼ˆæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼‰
  - [x] è¿›çº¿ç»Ÿè®¡å±•ç¤ºï¼ˆç»Ÿè®¡å¡ç‰‡ï¼šæ€»è¿›çº¿ã€ä»Šæ—¥è¿›çº¿ã€é‡å¤è¿›çº¿ã€ä»Šæ—¥é‡å¤ï¼‰
  - [x] å®æ—¶æ•°æ®æ›´æ–°ï¼ˆWebSocketï¼‰

---

### ç¬¬7å‘¨ï¼šåº•åº“ç®¡ç†æ¨¡å—

#### åç«¯å¼€å‘ âœ…
- [x] åº•åº“CRUD Serviceå±‚
- [x] å¯¼å…¥åŸå§‹è”ç³»äººåŠŸèƒ½
  - [x] æ–‡ä»¶ä¸Šä¼ 
  - [x] Excel/CSV/TXTè§£æ
  - [x] æ‰¹é‡æ’å…¥contact_pool
  - [x] å»é‡æ£€æŸ¥
- [x] åº•åº“æŸ¥è¯¢API
  - [x] GET /api/v1/contact-pool/summary - ç»Ÿè®¡æ±‡æ€»
  - [x] GET /api/v1/contact-pool/list - åˆ—è¡¨ï¼ˆæŒ‰æ¿€æ´»ç +å¹³å°ï¼‰
  - [x] GET /api/v1/contact-pool/detail - è¯¦ç»†åˆ—è¡¨
- [x] å¯¼å…¥æ‰¹æ¬¡ç®¡ç†
  - [x] GET /api/v1/contact-pool/import-batches - å¯¼å…¥æ‰¹æ¬¡åˆ—è¡¨
  - [x] POST /api/v1/contact-pool/import - å¯¼å…¥è”ç³»äºº

#### å‰ç«¯å¼€å‘ âœ…
- [x] åº•åº“ç®¡ç†é¡µé¢
  - [x] ç»Ÿè®¡å¡ç‰‡ï¼ˆæ˜¾ç¤ºå¯¼å…¥æ•°é‡ã€å¹³å°å·¥å•æ•°é‡ã€æ€»æ•°é‡ï¼‰
  - [x] ä¸¤ä¸ªæ ‡ç­¾é¡µï¼ˆç»Ÿè®¡æ±‡æ€»ã€è¯¦ç»†åˆ—è¡¨ï¼‰
  - [x] å¯¼å…¥å¯¹è¯æ¡†ï¼ˆæ–‡ä»¶ä¸Šä¼ ã€å¹³å°ç±»å‹ã€å»é‡èŒƒå›´ã€åˆ†ç»„é€‰æ‹©ï¼‰
  - [x] æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ï¼ˆæ”¯æŒExcel/CSV/TXTæ ¼å¼ï¼‰
  - [x] è¯¦ç»†åˆ—è¡¨é¡µé¢ï¼ˆç­›é€‰ã€åˆ†é¡µã€è¡¨æ ¼ï¼‰

---

### ç¬¬8å‘¨ï¼šå®¢æˆ·ç®¡ç†æ¨¡å—

#### åç«¯å¼€å‘ âœ…
- [x] å®¢æˆ·CRUD Serviceå±‚
- [x] å®¢æˆ·APIæ¥å£
  - [x] GET /api/customers - åˆ—è¡¨ï¼ˆç­›é€‰ã€åˆ†é¡µï¼‰
  - [x] GET /api/customers/:id - å®¢æˆ·è¯¦æƒ…
  - [x] PUT /api/customers/:id - æ›´æ–°å®¢æˆ·ä¿¡æ¯
  - [x] DELETE /api/customers/:id - åˆ é™¤
- [x] å®¢æˆ·ä¿¡æ¯åŒæ­¥å¤„ç†ï¼ˆä»Windowså®¢æˆ·ç«¯ï¼‰
- [x] å®¢æˆ·ç±»å‹åˆ¤æ–­é€»è¾‘

#### å‰ç«¯å¼€å‘ âœ…
- [x] å®¢æˆ·åˆ—è¡¨é¡µé¢
  - [x] å¹³å°ç­›é€‰
  - [x] ç­›é€‰åŒºåŸŸï¼ˆåˆ†ç»„ã€å®¢æˆ·ç±»å‹ã€æœç´¢ï¼‰
  - [x] æ•°æ®è¡¨æ ¼ï¼ˆæ˜¾ç¤ºå®¢æˆ·ä¿¡æ¯ã€ç»Ÿè®¡ä¿¡æ¯ï¼‰
  - [x] å®¢æˆ·è¯¦æƒ…å¯¹è¯æ¡†ï¼ˆåŸºæœ¬ä¿¡æ¯å±•ç¤ºã€ç¼–è¾‘åŠŸèƒ½ï¼‰
  - [x] è·Ÿè¿›è®°å½•æŒ‰é’®ï¼ˆè·³è½¬åˆ°è·Ÿè¿›è®°å½•é¡µé¢å¹¶è‡ªåŠ¨ç­›é€‰ï¼‰
  - [x] åˆ†é¡µåŠŸèƒ½

---

### ç¬¬9å‘¨ï¼šè·Ÿè¿›è®°å½•æ¨¡å—

#### åç«¯å¼€å‘ âœ…
- [x] è·Ÿè¿›è®°å½•CRUD Serviceå±‚
- [x] è·Ÿè¿›è®°å½•APIæ¥å£
  - [x] GET /api/follow-ups - åˆ—è¡¨ï¼ˆç­›é€‰ã€åˆ†é¡µï¼‰
  - [x] POST /api/follow-ups - åˆ›å»º
  - [x] PUT /api/follow-ups/:id - ç¼–è¾‘å†…å®¹
  - [x] DELETE /api/follow-ups/:id - åˆ é™¤
  - [x] POST /api/follow-ups/batch - æ‰¹é‡åˆ›å»º
- [x] è·Ÿè¿›è®°å½•åŒæ­¥å¤„ç†ï¼ˆä»Windowså®¢æˆ·ç«¯ï¼‰

#### å‰ç«¯å¼€å‘ âœ…
- [x] è·Ÿè¿›è®°å½•é¡µé¢
  - [x] ç­›é€‰åŒºåŸŸï¼ˆå¹³å°ã€åˆ†ç»„ã€æ—¶é—´èŒƒå›´ã€æœç´¢ï¼‰
  - [x] æ•°æ®è¡¨æ ¼ï¼ˆæ˜¾ç¤ºè·Ÿè¿›è®°å½•ä¿¡æ¯ï¼‰
  - [x] æ–°å¢è®°å½•å¯¹è¯æ¡†
  - [x] ç¼–è¾‘å¯¹è¯æ¡†
  - [x] åˆ é™¤ç¡®è®¤
  - [x] åˆ†é¡µåŠŸèƒ½
  - [x] æ”¯æŒé¡µé¢é—´è·³è½¬å’Œè‡ªåŠ¨ç­›é€‰

---

### ç¬¬10å‘¨ï¼šå®šæ—¶ä»»åŠ¡ä¸åå°æœåŠ¡ âœ…

#### åç«¯å¼€å‘ âœ…
- [x] å®šæ—¶ä»»åŠ¡æ¡†æ¶ï¼ˆcronï¼‰
- [x] æ¯æ—¥é‡ç½®ä»»åŠ¡
  - [x] æ¯åˆ†é’Ÿæ£€æŸ¥æ˜¯å¦éœ€è¦é‡ç½®
  - [x] æ ¹æ®æ¯ä¸ªåˆ†ç»„çš„reset_timeåˆ¤æ–­æ˜¯å¦éœ€è¦é‡ç½®
  - [x] æ”¯æŒè´¦å·çº§åˆ«çš„ç‹¬ç«‹é‡ç½®æ—¶é—´ï¼ˆå¦‚æœè´¦å·è®¾ç½®äº†reset_timeï¼Œä½¿ç”¨è´¦å·çš„ï¼›å¦åˆ™ä½¿ç”¨åˆ†ç»„çš„ï¼‰
  - [x] é‡ç½®group_stats.today_incomingå’Œtoday_duplicate
  - [x] é‡ç½®line_account_stats.today_incomingå’Œtoday_duplicate
- [x] å…¨é‡æ ¡å‡†ä»»åŠ¡
  - [x] æ¯å¤©å‡Œæ™¨3ç‚¹æ‰§è¡Œ
  - [x] é‡ç®—æ‰€æœ‰ç»Ÿè®¡æ•°æ®ï¼ˆåˆ†ç»„ç»Ÿè®¡å’Œè´¦å·ç»Ÿè®¡ï¼‰
  - [x] é˜²æ­¢æ•°æ®æ¼‚ç§»
- [x] ç¦»çº¿æ£€æµ‹ä»»åŠ¡
  - [x] æ¯5åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡WebSocketè¿æ¥
  - [x] æ ‡è®°è¶…æ—¶ç¦»çº¿çš„è´¦å·ä¸ºabnormal_offline
  - [x] æ›´æ–°åˆ†ç»„ç»Ÿè®¡ä¸­çš„åœ¨çº¿è´¦å·æ•°
- [x] åˆ†åŒºè‡ªåŠ¨åˆ›å»ºä»»åŠ¡
  - [x] æ¯æœˆ1å·å‡Œæ™¨2ç‚¹åˆ›å»ºä¸‹æœˆåˆ†åŒº
  - [x] è°ƒç”¨æ•°æ®åº“å‡½æ•°create_next_month_partitions()
- [x] æ•°æ®å½’æ¡£ä»»åŠ¡
  - [x] æ¯å¤©å‡Œæ™¨4ç‚¹å½’æ¡£12ä¸ªæœˆå‰çš„æ•°æ®
  - [x] å½’æ¡£incoming_logså’Œaccount_status_logs

#### åˆ›å»ºçš„æ–‡ä»¶
- [x] `backend/internal/scheduler/scheduler.go` - å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨
- [x] `backend/internal/scheduler/daily_reset.go` - æ¯æ—¥é‡ç½®ä»»åŠ¡ï¼ˆæ”¯æŒåˆ†ç»„å’Œè´¦å·ç‹¬ç«‹é‡ç½®æ—¶é—´ï¼‰
- [x] `backend/internal/scheduler/stats_calibration.go` - å…¨é‡æ ¡å‡†ä»»åŠ¡
- [x] `backend/internal/scheduler/offline_detection.go` - ç¦»çº¿æ£€æµ‹ä»»åŠ¡
- [x] `backend/internal/scheduler/partition_manager.go` - åˆ†åŒºç®¡ç†ä»»åŠ¡
- [x] `backend/internal/scheduler/archive.go` - æ•°æ®å½’æ¡£ä»»åŠ¡
- [x] `backend/migrations/005_add_reset_time_to_line_accounts.sql` - æ·»åŠ è´¦å·é‡ç½®æ—¶é—´å­—æ®µ

#### æ›´æ–°çš„æ–‡ä»¶
- [x] `backend/cmd/server/main.go` - é›†æˆå®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨
- [x] `backend/internal/models/line_account.go` - æ·»åŠ ResetTimeå­—æ®µ

#### å‰ç«¯å¼€å‘ âœ…
- [x] è´¦å·ç®¡ç†é¡µé¢å¢å¼º
  - [x] æ·»åŠ é‡ç½®æ—¶é—´å­—æ®µï¼ˆå¯é€‰ï¼Œç•™ç©ºåˆ™ä½¿ç”¨åˆ†ç»„çš„é‡ç½®æ—¶é—´ï¼‰
  - [x] åœ¨è´¦å·åˆ—è¡¨è¡¨æ ¼ä¸­æ·»åŠ é‡ç½®æ—¶é—´åˆ—æ˜¾ç¤º
  - [x] äºŒç»´ç åŠŸèƒ½å¢å¼º
    - [x] æ·»åŠ é‡æ–°ç”ŸæˆäºŒç»´ç åŠŸèƒ½ï¼ˆå·²æœ‰äºŒç»´ç æ—¶å¯é‡æ–°ç”Ÿæˆï¼‰
    - [x] æ·»åŠ åˆ é™¤äºŒç»´ç åŠŸèƒ½
    - [x] ä¼˜åŒ–äºŒç»´ç å¯¹è¯æ¡†UIï¼ˆç§»é™¤å†…å®¹åŒºåŸŸçš„ç”ŸæˆæŒ‰é’®ï¼‰
- [x] åˆ†ç»„ç®¡ç†é¡µé¢å¢å¼º
  - [x] åœ¨åˆ†ç»„åˆ—è¡¨è¡¨æ ¼ä¸­æ·»åŠ é‡ç½®æ—¶é—´åˆ—æ˜¾ç¤º

**å½“å‰çŠ¶æ€**: ç¬¬10å‘¨å®šæ—¶ä»»åŠ¡ä¸åå°æœåŠ¡ï¼ˆåç«¯+å‰ç«¯ï¼‰å¼€å‘å·²å®Œæˆ âœ…

---

### ç¬¬11å‘¨ï¼šç”¨æˆ·ç®¡ç†ä¸å¤§æ¨¡å‹æ¨¡å—

#### åç«¯å¼€å‘ - ç”¨æˆ·ç®¡ç† âœ…
- [x] ç”¨æˆ·ç®¡ç†APIï¼ˆç®¡ç†å‘˜ä¸“ç”¨ï¼‰
  - [x] GET /api/admin/users - ç”¨æˆ·åˆ—è¡¨
  - [x] POST /api/admin/users - åˆ›å»ºæ™®é€šç”¨æˆ·
  - [x] PUT /api/admin/users/:id - æ›´æ–°ç”¨æˆ·
  - [x] DELETE /api/admin/users/:id - åˆ é™¤ç”¨æˆ·

#### åç«¯å¼€å‘ - å¤§æ¨¡å‹é…ç½® âœ…
- [x] å¤§æ¨¡å‹é…ç½®APIï¼ˆç®¡ç†å‘˜ä¸“ç”¨ï¼‰
  - [x] GET /api/admin/llm/configs - é…ç½®åˆ—è¡¨
  - [x] POST /api/admin/llm/configs - åˆ›å»ºé…ç½®
  - [x] PUT /api/admin/llm/configs/:id - æ›´æ–°é…ç½®
  - [x] DELETE /api/admin/llm/configs/:id - åˆ é™¤é…ç½®
  - [x] POST /api/admin/llm/configs/:id/test - æµ‹è¯•è¿æ¥
- [x] Promptæ¨¡æ¿API
  - [x] GET /api/admin/llm/templates - æ¨¡æ¿åˆ—è¡¨
  - [x] POST /api/admin/llm/templates - åˆ›å»ºæ¨¡æ¿
  - [x] PUT /api/admin/llm/templates/:id - æ›´æ–°æ¨¡æ¿
  - [x] DELETE /api/admin/llm/templates/:id - åˆ é™¤æ¨¡æ¿
- [x] API KeyåŠ å¯†/è§£å¯†æœåŠ¡
  - [x] ä½¿ç”¨AES-256-GCMåŠ å¯†ç®—æ³•
  - [x] æ”¯æŒç¯å¢ƒå˜é‡é…ç½®åŠ å¯†å¯†é’¥
- [x] å¤§æ¨¡å‹è°ƒç”¨ä»£ç†æœåŠ¡
  - [x] OpenAIé€‚é…å™¨
  - [x] Claudeé€‚é…å™¨
  - [x] é€šä¹‰åƒé—®é€‚é…å™¨
  - [x] è‡ªå®šä¹‰æä¾›å•†é€‚é…å™¨

#### åç«¯å¼€å‘ - Windowså®¢æˆ·ç«¯è°ƒç”¨æ¥å£ âœ…
- [x] GET /api/llm/configs - è·å–å¯ç”¨é…ç½®ï¼ˆä¸è¿”å›API Keyï¼‰
- [x] POST /api/llm/call - è°ƒç”¨å¤§æ¨¡å‹
- [x] POST /api/llm/call-template - ä½¿ç”¨æ¨¡æ¿è°ƒç”¨
- [ ] POST /api/llm/call-stream - æµå¼è°ƒç”¨ï¼ˆå¯é€‰ï¼Œæš‚æœªå®ç°ï¼‰
- [x] GET /api/llm/templates - è·å–æ¨¡æ¿åˆ—è¡¨
- [x] è°ƒç”¨è®°å½•Service
  - [x] è®°å½•æ‰€æœ‰è°ƒç”¨ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰
  - [x] Tokenç»Ÿè®¡ï¼ˆæ€»Tokenã€Prompt Tokenã€Completion Tokenï¼‰
  - [x] è°ƒç”¨è€—æ—¶ç»Ÿè®¡
  - [x] GET /api/admin/llm/call-logs - è°ƒç”¨æ—¥å¿—åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µå’Œç­›é€‰ï¼‰

#### å‰ç«¯å¼€å‘
- [ ] ç”¨æˆ·ç®¡ç†é¡µé¢ï¼ˆç®¡ç†å‘˜ï¼‰
- [ ] å¤§æ¨¡å‹é…ç½®é¡µé¢ï¼ˆç®¡ç†å‘˜ï¼‰
  - é…ç½®åˆ—è¡¨
  - æ–°å¢/ç¼–è¾‘é…ç½®å¯¹è¯æ¡†
  - Promptæ¨¡æ¿ç®¡ç†
  - æµ‹è¯•è¿æ¥åŠŸèƒ½
- [ ] å¤§æ¨¡å‹è°ƒç”¨è®°å½•é¡µé¢ï¼ˆç®¡ç†å‘˜ï¼‰
  - è°ƒç”¨è®°å½•åˆ—è¡¨
  - ç­›é€‰åŠŸèƒ½
  - æŸ¥çœ‹è¯¦æƒ…å¯¹è¯æ¡†
  - Tokenç»Ÿè®¡

---

### ç¬¬12å‘¨ï¼šå‰ç«¯ä¼˜åŒ–ä¸äº¤äº’

#### å‰ç«¯å¼€å‘
- [ ] ä¾§è¾¹æ å¯¼èˆªï¼ˆæ ¹æ®è§’è‰²æ˜¾ç¤ºä¸åŒèœå•ï¼‰
- [ ] é¢åŒ…å±‘å¯¼èˆª
- [ ] WebSocketè¿æ¥ç®¡ç†
  - è‡ªåŠ¨é‡è¿
  - æ–­çº¿æç¤º
  - å®æ—¶æ•°æ®æ›´æ–°
- [ ] æ•°æ®å¯è§†åŒ–
  - è¿›çº¿è¶‹åŠ¿å›¾ï¼ˆEChartsï¼‰
  - ç»Ÿè®¡å¡ç‰‡
  - å®æ—¶åˆ·æ–°åŠ¨ç”»
- [ ] å“åº”å¼å¸ƒå±€
- [ ] åŠ è½½çŠ¶æ€ä¼˜åŒ–
- [ ] é”™è¯¯å¤„ç†ä¸æç¤º

---

### ç¬¬13å‘¨ï¼šæµ‹è¯•ä¸ä¼˜åŒ–

#### åç«¯æµ‹è¯•
- [ ] å•å…ƒæµ‹è¯•
  - Serviceå±‚æµ‹è¯•
  - å»é‡é€»è¾‘æµ‹è¯•
  - ç»Ÿè®¡è®¡ç®—æµ‹è¯•
- [ ] APIé›†æˆæµ‹è¯•
- [ ] WebSocketæ€§èƒ½æµ‹è¯•
  - 800ä¸ªå¹¶å‘è¿æ¥æµ‹è¯•
  - å‹åŠ›æµ‹è¯•
  - å†…å­˜æ³„æ¼æ£€æµ‹
- [ ] æ•°æ®åº“æ€§èƒ½æµ‹è¯•
  - æŸ¥è¯¢ä¼˜åŒ–
  - ç´¢å¼•æ•ˆæœéªŒè¯

#### å‰ç«¯æµ‹è¯•
- [ ] ç»„ä»¶æµ‹è¯•
- [ ] E2Eæµ‹è¯•ï¼ˆå¯é€‰ï¼‰
- [ ] æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•

#### æ€§èƒ½ä¼˜åŒ–
- [ ] SQLæŸ¥è¯¢ä¼˜åŒ–
- [ ] Redisç¼“å­˜ä¼˜åŒ–
- [ ] WebSocketè¿æ¥ä¼˜åŒ–
- [ ] å‰ç«¯æ‰“åŒ…ä¼˜åŒ–

---

### ç¬¬14å‘¨ï¼šéƒ¨ç½²ä¸æ–‡æ¡£

#### éƒ¨ç½²å‡†å¤‡
- [ ] Dockeré•œåƒæ„å»º
  - åç«¯Goé•œåƒ
  - å‰ç«¯Nginxé•œåƒ
- [ ] docker-composeé…ç½®
  - PostgreSQL
  - Redis
  - Backend
  - Frontend
  - Nginx
- [ ] Nginxé…ç½®
  - åå‘ä»£ç†
  - WebSocketæ”¯æŒ
  - é™æ€æ–‡ä»¶æœåŠ¡
- [ ] SSLè¯ä¹¦é…ç½®

#### æ–‡æ¡£ç¼–å†™
- [x] APIæ–‡æ¡£è§„åˆ’ï¼ˆå·²å®Œæˆï¼‰
- [ ] Swaggeré›†æˆåˆ°Goé¡¹ç›®
  - é…ç½®swaggoå·¥å…·
  - æ·»åŠ æ¥å£æ³¨è§£
  - ç”Ÿæˆswagger.json
  - é…ç½®æ–‡æ¡£è®¿é—®è·¯ç”±
- [ ] APIæ–‡æ¡£ç¼–å†™
  - è®¤è¯æˆæƒæ¥å£æ–‡æ¡£
  - åˆ†ç»„ç®¡ç†æ¥å£æ–‡æ¡£
  - Lineè´¦å·ç®¡ç†æ¥å£æ–‡æ¡£
  - å®¢æˆ·ç®¡ç†æ¥å£æ–‡æ¡£
  - è·Ÿè¿›è®°å½•æ¥å£æ–‡æ¡£
  - ç»Ÿè®¡æ•°æ®æ¥å£æ–‡æ¡£
  - åº•åº“ç®¡ç†æ¥å£æ–‡æ¡£
  - å¤§æ¨¡å‹æœåŠ¡æ¥å£æ–‡æ¡£
  - WebSocketæ¥å£æ–‡æ¡£
- [ ] æ•°æ®åº“æ–‡æ¡£
  - ERå›¾ç”Ÿæˆ
  - è¡¨ç»“æ„è¯´æ˜
  - ç´¢å¼•å’Œçº¦æŸè¯´æ˜
  - åˆ†åŒºç­–ç•¥è¯´æ˜
- [ ] éƒ¨ç½²æ–‡æ¡£
  - Dockeréƒ¨ç½²æŒ‡å—
  - ç¯å¢ƒé…ç½®è¯´æ˜
  - ç›‘æ§å’Œæ—¥å¿—é…ç½®
  - å¤‡ä»½æ¢å¤æ–¹æ¡ˆ
- [ ] Windowså®¢æˆ·ç«¯å¯¹æ¥æ–‡æ¡£
  - WebSocketæ¶ˆæ¯åè®®
  - æ•°æ®åŒæ­¥æµç¨‹
  - é”™è¯¯å¤„ç†æœºåˆ¶
- [ ] ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œ
  - ç®¡ç†å‘˜æ“ä½œæŒ‡å—
  - æ™®é€šç”¨æˆ·æ“ä½œæŒ‡å—
  - å­è´¦å·ä½¿ç”¨è¯´æ˜

---

## ğŸ“‚ é¡¹ç›®ç›®å½•ç»“æ„

### åç«¯ï¼ˆGoï¼‰

```
backend/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ server/
â”‚       â””â”€â”€ main.go                    # åº”ç”¨å…¥å£
â”‚
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ models/                        # GORMæ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ user.go
â”‚   â”‚   â”œâ”€â”€ group.go
â”‚   â”‚   â”œâ”€â”€ line_account.go
â”‚   â”‚   â”œâ”€â”€ group_stats.go
â”‚   â”‚   â”œâ”€â”€ line_account_stats.go
â”‚   â”‚   â”œâ”€â”€ incoming_log.go
â”‚   â”‚   â”œâ”€â”€ contact_pool.go
â”‚   â”‚   â”œâ”€â”€ customer.go
â”‚   â”‚   â”œâ”€â”€ follow_up_record.go
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ schemas/                       # è¯·æ±‚/å“åº”ç»“æ„ä½“
â”‚   â”‚   â”œâ”€â”€ auth.go
â”‚   â”‚   â”œâ”€â”€ group.go
â”‚   â”‚   â”œâ”€â”€ line_account.go
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ handlers/                      # HTTPå¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ auth.go
â”‚   â”‚   â”œâ”€â”€ group.go
â”‚   â”‚   â”œâ”€â”€ line_account.go
â”‚   â”‚   â”œâ”€â”€ customer.go
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                      # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ auth_service.go
â”‚   â”‚   â”œâ”€â”€ group_service.go
â”‚   â”‚   â”œâ”€â”€ line_account_service.go
â”‚   â”‚   â”œâ”€â”€ incoming_service.go       # è¿›çº¿å¤„ç†ï¼ˆæ ¸å¿ƒï¼‰
â”‚   â”‚   â”œâ”€â”€ dedup_service.go          # å»é‡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ stats_service.go          # ç»Ÿè®¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ qr_service.go             # äºŒç»´ç ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ llm_service.go            # å¤§æ¨¡å‹è°ƒç”¨æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ llm_provider.go           # å¤§æ¨¡å‹æä¾›å•†é€‚é…
â”‚   â”‚   â””â”€â”€ encryption_service.go     # åŠ å¯†æœåŠ¡ï¼ˆAPI KeyåŠ å¯†ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ websocket/                     # WebSocketæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ manager.go                # è¿æ¥ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ client_handler.go         # Windowså®¢æˆ·ç«¯å¤„ç†
â”‚   â”‚   â”œâ”€â”€ dashboard_handler.go      # å‰ç«¯çœ‹æ¿å¤„ç†
â”‚   â”‚   â”œâ”€â”€ message_handler.go        # æ¶ˆæ¯å¤„ç†
â”‚   â”‚   â””â”€â”€ hub.go                    # æ¶ˆæ¯å¹¿æ’­ä¸­å¿ƒ
â”‚   â”‚
â”‚   â”œâ”€â”€ middleware/                    # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ auth.go                   # è®¤è¯ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ permission.go             # æƒé™ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ cors.go                   # CORS
â”‚   â”‚   â”œâ”€â”€ logger.go                 # æ—¥å¿—
â”‚   â”‚   â””â”€â”€ recovery.go               # é”™è¯¯æ¢å¤
â”‚   â”‚
â”‚   â”œâ”€â”€ scheduler/                     # å®šæ—¶ä»»åŠ¡
â”‚   â”‚   â”œâ”€â”€ scheduler.go              # ä»»åŠ¡è°ƒåº¦å™¨
â”‚   â”‚   â”œâ”€â”€ daily_reset.go            # æ¯æ—¥é‡ç½®
â”‚   â”‚   â”œâ”€â”€ stats_calibration.go      # ç»Ÿè®¡æ ¡å‡†
â”‚   â”‚   â””â”€â”€ partition_manager.go      # åˆ†åŒºç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                         # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ crypto.go                 # åŠ å¯†å·¥å…·
â”‚   â”‚   â”œâ”€â”€ jwt.go                    # JWTå·¥å…·
â”‚   â”‚   â”œâ”€â”€ validator.go              # æ•°æ®éªŒè¯
â”‚   â”‚   â””â”€â”€ time.go                   # æ—¶é—´å¤„ç†
â”‚   â”‚
â”‚   â””â”€â”€ config/                        # é…ç½®
â”‚       â”œâ”€â”€ config.go                 # é…ç½®ç»“æ„
â”‚       â””â”€â”€ database.go               # æ•°æ®åº“è¿æ¥
â”‚
â”œâ”€â”€ pkg/                               # å…¬å…±åŒ…
â”‚   â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ redis/
â”‚   â””â”€â”€ logger/
â”‚
â”œâ”€â”€ migrations/                        # æ•°æ®åº“è¿ç§»
â”‚   â”œâ”€â”€ 001_create_users.sql
â”‚   â”œâ”€â”€ 002_create_groups.sql
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ scripts/                           # è„šæœ¬
â”‚   â”œâ”€â”€ init_db.sh
â”‚   â””â”€â”€ create_admin.go
â”‚
â”œâ”€â”€ static/                            # é™æ€æ–‡ä»¶
â”‚   â””â”€â”€ qrcodes/
â”‚
â”œâ”€â”€ tests/                             # æµ‹è¯•
â”‚   â”œâ”€â”€ unit/
â”‚   â””â”€â”€ integration/
â”‚
â”œâ”€â”€ go.mod
â”œâ”€â”€ go.sum
â”œâ”€â”€ .env.example
â”œâ”€â”€ Dockerfile
â””â”€â”€ README.md
```

---

### å‰ç«¯ï¼ˆVue3ï¼‰

```
frontend/
â”œâ”€â”€ public/
â”‚   â””â”€â”€ favicon.ico
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                           # APIå°è£…
â”‚   â”‚   â”œâ”€â”€ auth.js
â”‚   â”‚   â”œâ”€â”€ group.js
â”‚   â”‚   â”œâ”€â”€ lineAccount.js
â”‚   â”‚   â”œâ”€â”€ customer.js
â”‚   â”‚   â”œâ”€â”€ followUp.js
â”‚   â”‚   â”œâ”€â”€ stats.js
â”‚   â”‚   â”œâ”€â”€ contactPool.js
â”‚   â”‚   â”œâ”€â”€ llm.js                    # å¤§æ¨¡å‹API
â”‚   â”‚   â””â”€â”€ user.js                   # ç”¨æˆ·ç®¡ç†API
â”‚   â”‚
â”‚   â”œâ”€â”€ assets/                        # é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â””â”€â”€ styles/
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                    # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ LineStatusBadge.vue
â”‚   â”‚   â”œâ”€â”€ QRCodeViewer.vue
â”‚   â”‚   â”œâ”€â”€ StatsCard.vue
â”‚   â”‚   â”œâ”€â”€ TableFilter.vue
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ views/                         # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.vue             # ç™»å½•é¡µ
â”‚   â”‚   â”‚   â””â”€â”€ SubAccountLogin.vue   # å­è´¦å·ç™»å½•
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ admin/                     # ç®¡ç†åå°
â”‚   â”‚   â”‚   â”œâ”€â”€ Layout.vue            # å¸ƒå±€
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.vue         # é¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ GroupManage.vue       # åˆ†ç»„ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ AccountList.vue       # è´¦å·åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ LeadsList.vue         # çº¿ç´¢åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ ContactPool.vue       # åº•åº“ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ CustomerList.vue      # å®¢æˆ·åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ FollowUpRecords.vue   # è·Ÿè¿›è®°å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ UserManage.vue        # ç”¨æˆ·ç®¡ç†ï¼ˆç®¡ç†å‘˜ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ LLMConfig.vue         # å¤§æ¨¡å‹é…ç½®ï¼ˆç®¡ç†å‘˜ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ LLMCallLogs.vue       # å¤§æ¨¡å‹è°ƒç”¨è®°å½•ï¼ˆç®¡ç†å‘˜ï¼‰
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ subaccount/                # å­è´¦å·åå°ï¼ˆæ•°æ®è¿‡æ»¤ï¼‰
â”‚   â”‚       â””â”€â”€ Layout.vue
â”‚   â”‚
â”‚   â”œâ”€â”€ router/                        # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”‚
â”‚   â”œâ”€â”€ store/                         # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ auth.js                   # è®¤è¯çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ user.js                   # ç”¨æˆ·ä¿¡æ¯
â”‚   â”‚   â”œâ”€â”€ websocket.js              # WebSocketè¿æ¥
â”‚   â”‚   â””â”€â”€ stats.js                  # ç»Ÿè®¡æ•°æ®
â”‚   â”‚
â”‚   â”œâ”€â”€ styles/                        # æ ·å¼æ–‡ä»¶ï¼ˆLessï¼‰
â”‚   â”‚   â”œâ”€â”€ variables.less            # æ ·å¼å˜é‡
â”‚   â”‚   â”œâ”€â”€ mixins.less               # æ ·å¼æ··åˆ
â”‚   â”‚   â””â”€â”€ index.less                # å…¨å±€æ ·å¼
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                         # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ request.js                # Axioså°è£…
â”‚   â”‚   â”œâ”€â”€ websocket.js              # WebSocketå°è£…
â”‚   â”‚   â”œâ”€â”€ auth.js                   # è®¤è¯å·¥å…·
â”‚   â”‚   â””â”€â”€ format.js                 # æ ¼å¼åŒ–å·¥å…·
â”‚   â”‚
â”‚   â”œâ”€â”€ App.vue
â”‚   â””â”€â”€ main.js
â”‚
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.js
â”œâ”€â”€ .env.development
â”œâ”€â”€ .env.production
â””â”€â”€ Dockerfile
```

---

## ğŸ³ Dockeréƒ¨ç½²ç»“æ„

### docker-compose.yml

```yaml
version: '3.8'

services:
  # PostgreSQLæ•°æ®åº“
  postgres:
    image: postgres:15-alpine
    container_name: line-postgres
    environment:
      POSTGRES_DB: line_management
      POSTGRES_USER: lineuser
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./migrations:/docker-entrypoint-initdb.d
    ports:
      - "5432:5432"
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U lineuser"]
      interval: 10s
      timeout: 5s
      retries: 5

  # Redisç¼“å­˜
  redis:
    image: redis:7-alpine
    container_name: line-redis
    command: redis-server --appendonly yes
    volumes:
      - redis_data:/data
    ports:
      - "6379:6379"

  # åç«¯APIï¼ˆGoï¼‰
  backend:
    build: ./backend
    container_name: line-backend
    environment:
      DATABASE_URL: postgres://lineuser:${POSTGRES_PASSWORD}@postgres:5432/line_management?sslmode=disable
      REDIS_URL: redis://redis:6379/0
      JWT_SECRET: ${JWT_SECRET}
      GIN_MODE: release
    ports:
      - "8080:8080"
    depends_on:
      postgres:
        condition: service_healthy
      redis:
        condition: service_started
    volumes:
      - backend_static:/app/static
    restart: unless-stopped

  # å‰ç«¯ï¼ˆVue3 + Nginxï¼‰
  frontend:
    build: ./frontend
    container_name: line-frontend
    ports:
      - "80:80"
    depends_on:
      - backend
    restart: unless-stopped

volumes:
  postgres_data:
  redis_data:
  backend_static:
```

---

## ğŸ“Š æ€§èƒ½ç›®æ ‡

### WebSocketæ€§èƒ½
- **å¹¶å‘è¿æ¥**: 800+ï¼ˆç›®æ ‡1000ï¼‰
- **å¿ƒè·³é¢‘ç‡**: 60ç§’/æ¬¡
- **æ¶ˆæ¯å»¶è¿Ÿ**: <50ms
- **æœåŠ¡å™¨é…ç½®**: 2æ ¸4G

### APIæ€§èƒ½
- **å“åº”æ—¶é—´**: <100msï¼ˆ99%è¯·æ±‚ï¼‰
- **QPS**: 1000+
- **å¹¶å‘ç”¨æˆ·**: 100+

### æ•°æ®åº“æ€§èƒ½
- **æŸ¥è¯¢å“åº”**: <50msï¼ˆå¤æ‚æŸ¥è¯¢ï¼‰
- **å†™å…¥TPS**: 500+
- **è¿æ¥æ•°**: 100

---

## ğŸ¯ å…³é”®æŠ€æœ¯ç‚¹

### 1. WebSocketè¿æ¥ç®¡ç†ï¼ˆGoï¼‰

```go
type ConnectionManager struct {
    clients    map[string]*Client      // key: activation_code + conn_id
    broadcast  chan []byte
    register   chan *Client
    unregister chan *Client
    mu         sync.RWMutex
}

type Client struct {
    ID             string
    ActivationCode string
    GroupID        uint
    Conn           *websocket.Conn
    Send           chan []byte
    LastHeartbeat  time.Time
}

// æ”¯æŒ800+å¹¶å‘è¿æ¥
func (m *ConnectionManager) Run() {
    for {
        select {
        case client := <-m.register:
            m.mu.Lock()
            m.clients[client.ID] = client
            m.mu.Unlock()
            
        case client := <-m.unregister:
            m.mu.Lock()
            delete(m.clients, client.ID)
            m.mu.Unlock()
            close(client.Send)
            
        case message := <-m.broadcast:
            m.mu.RLock()
            for _, client := range m.clients {
                select {
                case client.Send <- message:
                default:
                    close(client.Send)
                    delete(m.clients, client.ID)
                }
            }
            m.mu.RUnlock()
        }
    }
}
```

### 2. å¢é‡æ›´æ–°ç»Ÿè®¡ï¼ˆGoï¼‰

```go
func (s *IncomingService) RecordIncoming(data *IncomingData) error {
    return s.db.Transaction(func(tx *gorm.DB) error {
        // 1. å»é‡åˆ¤æ–­
        isDuplicate := s.CheckDuplicate(data)
        
        // 2. è®°å½•è¿›çº¿æ—¥å¿—
        log := &IncomingLog{
            LineAccountID:   data.LineAccountID,
            GroupID:         data.GroupID,
            IncomingLineID:  data.IncomingLineID,
            IsDuplicate:     isDuplicate,
            IncomingTime:    time.Now(),
        }
        if err := tx.Create(log).Error; err != nil {
            return err
        }
        
        // 3. å¢é‡æ›´æ–°è´¦å·ç»Ÿè®¡ï¼ˆç›´æ¥UPDATE +1ï¼‰
        if err := tx.Model(&LineAccountStats{}).
            Where("line_account_id = ?", data.LineAccountID).
            Updates(map[string]interface{}{
                "total_incoming":     gorm.Expr("total_incoming + ?", 1),
                "today_incoming":     gorm.Expr("today_incoming + ?", 1),
                "duplicate_incoming": gorm.Expr("duplicate_incoming + ?", ifDup(isDuplicate, 1, 0)),
            }).Error; err != nil {
            return err
        }
        
        // 4. å¢é‡æ›´æ–°åˆ†ç»„ç»Ÿè®¡
        if err := tx.Model(&GroupStats{}).
            Where("group_id = ?", data.GroupID).
            Updates(map[string]interface{}{
                "total_incoming":     gorm.Expr("total_incoming + ?", 1),
                "today_incoming":     gorm.Expr("today_incoming + ?", 1),
                "duplicate_incoming": gorm.Expr("duplicate_incoming + ?", ifDup(isDuplicate, 1, 0)),
            }).Error; err != nil {
            return err
        }
        
        // 5. æ·»åŠ åˆ°åº•åº“ï¼ˆå¦‚æœä¸é‡å¤ï¼‰
        if !isDuplicate {
            // ...
        }
        
        return nil
    })
}
```

### 3. å‰ç«¯WebSocketè¿æ¥ï¼ˆVue3ï¼‰

```javascript
// composables/useWebSocket.js
import { ref, onMounted, onUnmounted } from 'vue'

export function useWebSocket(url) {
  const ws = ref(null)
  const connected = ref(false)
  const reconnectTimer = ref(null)
  
  const connect = () => {
    ws.value = new WebSocket(url)
    
    ws.value.onopen = () => {
      connected.value = true
      console.log('WebSocketè¿æ¥æˆåŠŸ')
    }
    
    ws.value.onmessage = (event) => {
      const message = JSON.parse(event.data)
      handleMessage(message)
    }
    
    ws.value.onerror = (error) => {
      console.error('WebSocketé”™è¯¯:', error)
    }
    
    ws.value.onclose = () => {
      connected.value = false
      console.log('WebSocketæ–­å¼€ï¼Œ5ç§’åé‡è¿')
      reconnectTimer.value = setTimeout(connect, 5000)
    }
  }
  
  const disconnect = () => {
    if (reconnectTimer.value) {
      clearTimeout(reconnectTimer.value)
    }
    if (ws.value) {
      ws.value.close()
    }
  }
  
  onMounted(connect)
  onUnmounted(disconnect)
  
  return { ws, connected, connect, disconnect }
}
```

---

## âœ… å·²ç¡®è®¤æŠ€æœ¯æ ˆ

### åç«¯
- **è¯­è¨€**: Go 1.21+
- **æ¡†æ¶**: Gin
- **ORM**: GORM 2.0
- **WebSocket**: gorilla/websocket
- **JWT**: golang-jwt
- **å®šæ—¶ä»»åŠ¡**: robfig/cron
- **é…ç½®**: spf13/viper
- **æ—¥å¿—**: uber-go/zap
- **Redis**: go-redis

### å‰ç«¯
- **æ¡†æ¶**: Vue 3
- **UIåº“**: Element Plus
- **æ„å»ºå·¥å…·**: Vite
- **è·¯ç”±**: Vue Router 4
- **çŠ¶æ€ç®¡ç†**: Pinia
- **HTTP**: Axios
- **æ ·å¼**: Less CSS
- **å›¾è¡¨**: EChartsï¼ˆå¯é€‰ï¼‰

### æ•°æ®åº“
- **ä¸»æ•°æ®åº“**: PostgreSQL 15
- **ç¼“å­˜**: Redis 7
- **è¿æ¥æ± **: pgx

### éƒ¨ç½²
- **å®¹å™¨åŒ–**: Docker + docker-compose
- **åå‘ä»£ç†**: Nginx
- **SSL**: Let's Encrypt

---

## ğŸ“‹ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **âœ… å·²å®Œæˆ**: ç¬¬1å‘¨çš„é¡¹ç›®åˆå§‹åŒ–ï¼ˆåç«¯+å‰ç«¯ï¼‰
2. **âœ… å·²å®Œæˆ**: ç¬¬2å‘¨ - è®¤è¯ä¸æƒé™ç³»ç»Ÿå¼€å‘
3. **âœ… è¿›è¡Œä¸­**: ç¬¬3å‘¨ - åˆ†ç»„ç®¡ç†æ¨¡å—å¼€å‘ï¼ˆåç«¯å·²å®Œæˆï¼‰
4. **ä¸‹ä¸€æ­¥**: ç¬¬3å‘¨ - åˆ†ç»„ç®¡ç†æ¨¡å—å‰ç«¯å¼€å‘
5. **ä¼˜å…ˆå¼€å‘**: WebSocketæœåŠ¡ï¼ˆç¬¬5å‘¨ï¼‰+ è¿›çº¿ç»Ÿè®¡ï¼ˆç¬¬6å‘¨ï¼‰
5. **å¹¶è¡Œå¼€å‘**: å‰åç«¯å¯ä»¥åŒæ­¥å¼€å‘
6. **æŒç»­æµ‹è¯•**: æ¯å‘¨æœ«è¿›è¡Œé›†æˆæµ‹è¯•

## ğŸ“Š å½“å‰è¿›åº¦

### ç¬¬1å‘¨ï¼šé¡¹ç›®åˆå§‹åŒ– âœ…
- âœ… åç«¯åˆå§‹åŒ–å®Œæˆï¼ˆGoé¡¹ç›®ç»“æ„ã€Ginã€GORMã€æ•°æ®åº“ã€Redisã€æ—¥å¿—ç­‰ï¼‰
- âœ… å‰ç«¯åˆå§‹åŒ–å®Œæˆï¼ˆVue3é¡¹ç›®ã€Element Plusã€Routerã€Piniaã€Axiosã€APIå°è£…ã€é¡µé¢ç»„ä»¶ç­‰ï¼‰
- âœ… æ•°æ®åº“åˆå§‹åŒ–å®Œæˆï¼ˆ14å¼ è¡¨ã€åˆ†åŒºã€ç´¢å¼•ã€è§¦å‘å™¨ã€è§†å›¾ã€åˆå§‹æ•°æ®ï¼‰

### ç¬¬2å‘¨ï¼šè®¤è¯ä¸æƒé™ç³»ç»Ÿ âœ…
- âœ… åç«¯ï¼šJWT Tokenç”Ÿæˆä¸éªŒè¯ã€ä¸‰ç§ç™»å½•æ–¹å¼ã€æƒé™ä¸­é—´ä»¶ã€æ•°æ®è¿‡æ»¤ä¸­é—´ä»¶
- âœ… å‰ç«¯ï¼šç™»å½•é¡µé¢ã€è·¯ç”±å®ˆå«ã€çŠ¶æ€ç®¡ç†ï¼ˆå·²å®Œæˆï¼‰
- âœ… APIæ¥å£ï¼šæ‰€æœ‰è®¤è¯ç›¸å…³æ¥å£å·²å®Œæˆ

### ç¬¬3å‘¨ï¼šåˆ†ç»„ç®¡ç†æ¨¡å— âœ…

#### åç«¯å¼€å‘ âœ…
- âœ… åˆ†ç»„CRUD Serviceå±‚ï¼ˆGroupServiceï¼‰
- âœ… åˆ†ç»„APIæ¥å£ï¼ˆ6ä¸ªæ¥å£å…¨éƒ¨å®Œæˆï¼‰
  - âœ… GET /api/groups - åˆ—è¡¨ï¼ˆåˆ†é¡µã€ç­›é€‰ã€å…³è”ç»Ÿè®¡ä¿¡æ¯ï¼‰
  - âœ… POST /api/groups - åˆ›å»ºï¼ˆè‡ªåŠ¨ç”Ÿæˆ8ä½æ¿€æ´»ç ï¼‰
  - âœ… PUT /api/groups/:id - æ›´æ–°
  - âœ… DELETE /api/groups/:id - åˆ é™¤ï¼ˆè½¯åˆ é™¤ï¼‰
  - âœ… POST /api/groups/:id/regenerate-code - é‡æ–°ç”Ÿæˆæ¿€æ´»ç 
  - âœ… GET /api/groups/categories - è·å–åˆ†ç»„åˆ†ç±»åˆ—è¡¨
- âœ… åˆ›å»ºåˆ†ç»„æ—¶è‡ªåŠ¨åˆå§‹åŒ–group_stats
- âœ… åˆ†ç»„å½’ç±»ç®¡ç†ï¼ˆæ”¯æŒåˆ†ç±»æŸ¥è¯¢ï¼‰
- âœ… æ•°æ®è¿‡æ»¤ä¸­é—´ä»¶é›†æˆï¼ˆæ ¹æ®è§’è‰²è‡ªåŠ¨è¿‡æ»¤æ•°æ®ï¼‰
- âœ… ç»Ÿä¸€APIå“åº”æ ¼å¼
- âœ… æ‰¹é‡æ“ä½œæ¥å£
  - âœ… æ‰¹é‡åˆ é™¤åˆ†ç»„ï¼ˆPOST /api/groups/batch/deleteï¼‰
  - âœ… æ‰¹é‡æ›´æ–°åˆ†ç»„ï¼ˆPOST /api/groups/batch/updateï¼‰
- âœ… Swagger APIæ–‡æ¡£ç”Ÿæˆ

#### å‰ç«¯å¼€å‘ âœ…
- âœ… åˆ†ç»„ç®¡ç†é¡µé¢ï¼ˆGroupManage.vueï¼‰
  - âœ… ç­›é€‰åŒºåŸŸï¼ˆçŠ¶æ€ç­›é€‰ã€æœç´¢åŠŸèƒ½ï¼‰
  - âœ… æ•°æ®è¡¨æ ¼ï¼ˆæ˜¾ç¤ºåˆ†ç»„ä¿¡æ¯ã€ç»Ÿè®¡ä¿¡æ¯ï¼‰
  - âœ… æ–°å¢/ç¼–è¾‘å¯¹è¯æ¡†ï¼ˆå®Œæ•´è¡¨å•éªŒè¯ï¼‰
  - âœ… æ‰¹é‡æ“ä½œï¼ˆæ‰¹é‡åˆ é™¤ã€æ‰¹é‡æ›´æ–°ï¼‰
  - âœ… æŸ¥çœ‹æŒ‰é’®ï¼ˆè·³è½¬åˆ°è´¦å·åˆ—è¡¨ï¼‰
  - âœ… é‡æ–°ç”Ÿæˆæ¿€æ´»ç åŠŸèƒ½
  - âœ… åˆ†é¡µåŠŸèƒ½ï¼ˆæ”¯æŒåˆ‡æ¢æ¯é¡µæ•°é‡ï¼‰
  - âœ… åŠ è½½çŠ¶æ€å’Œé”™è¯¯å¤„ç†
- âœ… å­è´¦å·ç™»å½•é¡µé¢ï¼ˆSubAccountLogin.vueï¼‰
  - âœ… æ¿€æ´»ç ç™»å½•
  - âœ… å¯†ç å¯é€‰ï¼ˆå¦‚æœåˆ†ç»„è®¾ç½®äº†å¯†ç ï¼‰
  - âœ… ç™»å½•éªŒè¯å’Œé”™è¯¯æç¤º
- âœ… Element Plus ä¸­æ–‡è¯­è¨€åŒ…é…ç½®
- âœ… éšè—ä¸éœ€è¦çš„å­—æ®µï¼ˆåˆ†ç±»ã€æ‰€å±ç”¨æˆ·ï¼‰

**å½“å‰çŠ¶æ€**: ç¬¬3å‘¨åˆ†ç»„ç®¡ç†æ¨¡å—ï¼ˆåç«¯+å‰ç«¯ï¼‰å¼€å‘å·²å®Œæˆ âœ…

### ç¬¬4å‘¨ï¼šLineè´¦å·ç®¡ç†æ¨¡å— âœ…

#### åç«¯å¼€å‘ âœ…
- âœ… Lineè´¦å·CRUD Serviceå±‚ï¼ˆLineAccountServiceï¼‰
  - âœ… åˆ›å»ºè´¦å·ï¼ˆæ£€æŸ¥åˆ†ç»„é™åˆ¶ã€å»é‡éªŒè¯ï¼‰
  - âœ… è·å–è´¦å·åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µã€ç­›é€‰ã€æ•°æ®è¿‡æ»¤ï¼‰
  - âœ… æ›´æ–°è´¦å·ï¼ˆæ”¯æŒçŠ¶æ€æ›´æ–°ï¼‰
  - âœ… åˆ é™¤è´¦å·ï¼ˆè½¯åˆ é™¤ï¼Œè®°å½•åˆ é™¤è€…ï¼‰
- âœ… Lineè´¦å·APIæ¥å£ï¼ˆ7ä¸ªæ¥å£å…¨éƒ¨å®Œæˆï¼‰
  - âœ… GET /api/v1/line-accounts - åˆ—è¡¨ï¼ˆç­›é€‰ã€åˆ†é¡µã€å…³è”ç»Ÿè®¡ä¿¡æ¯ï¼‰
  - âœ… POST /api/v1/line-accounts - åˆ›å»ºï¼ˆè‡ªåŠ¨å…³è”æ¿€æ´»ç ï¼‰
  - âœ… PUT /api/v1/line-accounts/:id - æ›´æ–°
  - âœ… DELETE /api/v1/line-accounts/:id - åˆ é™¤ï¼ˆè½¯åˆ é™¤ï¼‰
  - âœ… POST /api/v1/line-accounts/:id/generate-qr - ç”ŸæˆäºŒç»´ç 
  - âœ… POST /api/v1/line-accounts/batch/delete - æ‰¹é‡åˆ é™¤
  - âœ… POST /api/v1/line-accounts/batch/update - æ‰¹é‡æ›´æ–°ï¼ˆå¼ºåˆ¶ä¸‹çº¿ç­‰ï¼‰
- âœ… äºŒç»´ç ç”ŸæˆæœåŠ¡ï¼ˆQRServiceï¼‰
  - âœ… è‡ªåŠ¨ç”ŸæˆLineæ·»åŠ å¥½å‹é“¾æ¥ï¼ˆhttps://line.me/ti/p/~{line_id}ï¼‰
  - âœ… æ”¯æŒè‡ªå®šä¹‰äºŒç»´ç å†…å®¹
  - âœ… äºŒç»´ç å›¾ç‰‡ä¿å­˜åˆ°static/qrcodesç›®å½•
- âœ… åˆ›å»ºè´¦å·æ—¶è‡ªåŠ¨åˆå§‹åŒ–line_account_stats
- âœ… è´¦å·çŠ¶æ€æ›´æ–°æ—¶è‡ªåŠ¨æ›´æ–°group_stats
  - âœ… æ›´æ–°total_accountsã€line_accounts/line_business_accounts
  - âœ… æ›´æ–°online_accountsï¼ˆæ ¹æ®åœ¨çº¿çŠ¶æ€ï¼‰
- âœ… æ•°æ®è¿‡æ»¤ä¸­é—´ä»¶é›†æˆï¼ˆæ ¹æ®è§’è‰²è‡ªåŠ¨è¿‡æ»¤æ•°æ®ï¼‰
- âœ… é™æ€æ–‡ä»¶æœåŠ¡é…ç½®ï¼ˆ/staticè·¯ç”±ï¼Œç”¨äºæä¾›äºŒç»´ç å›¾ç‰‡è®¿é—®ï¼‰
- âœ… Swagger APIæ–‡æ¡£ç”Ÿæˆï¼ˆåŒ…å«Lineè´¦å·ç®¡ç†æ¥å£ï¼‰

#### å‰ç«¯å¼€å‘ âœ…
- [x] è´¦å·åˆ—è¡¨é¡µé¢
  - [x] å¹³å°ç­›é€‰
  - [x] ç­›é€‰åŒºåŸŸï¼ˆåˆ†ç»„ã€åœ¨çº¿çŠ¶æ€ã€æœç´¢ï¼‰
  - [x] æ•°æ®è¡¨æ ¼ï¼ˆæ˜¾ç¤ºè´¦å·ä¿¡æ¯ã€ç»Ÿè®¡ä¿¡æ¯ï¼‰
  - [x] äºŒç»´ç é¢„è§ˆ
- [x] æ‰¹é‡æ“ä½œï¼ˆç§»é™¤ã€å¼ºåˆ¶ä¸‹çº¿ï¼‰
- [x] æ—¥å¿—è®°å½•å¼¹çª—
- [x] æ–°å¢/ç¼–è¾‘è´¦å·å¯¹è¯æ¡†
- [x] åˆ†é¡µåŠŸèƒ½
- [x] é”™è¯¯å¤„ç†å’ŒåŠ è½½çŠ¶æ€

**å½“å‰çŠ¶æ€**: ç¬¬4å‘¨Lineè´¦å·ç®¡ç†æ¨¡å—ï¼ˆåç«¯+å‰ç«¯ï¼‰å¼€å‘å·²å®Œæˆ âœ…

### ç¬¬5å‘¨ï¼šWebSocketæœåŠ¡ï¼ˆæ ¸å¿ƒï¼‰âœ…

#### åç«¯å¼€å‘ âœ…
- [x] WebSocketè¿æ¥ç®¡ç†å™¨ï¼ˆmanager.goï¼‰
  - [x] è¿æ¥æ± ç®¡ç†ï¼ˆWindowså®¢æˆ·ç«¯å’Œå‰ç«¯çœ‹æ¿åˆ†ç¦»ç®¡ç†ï¼‰
  - [x] å¤šæ¿€æ´»ç æ”¯æŒ
  - [x] è¿æ¥è®¤è¯ï¼ˆæ¿€æ´»ç +tokenè®¤è¯ï¼‰
  - [x] çº¿ç¨‹å®‰å…¨çš„è¿æ¥ç®¡ç†
- [x] å¿ƒè·³æœºåˆ¶
  - [x] 60ç§’å¿ƒè·³æ£€æµ‹
  - [x] 65ç§’è¶…æ—¶å¤„ç†
  - [x] è‡ªåŠ¨å¿ƒè·³æ£€æµ‹å™¨ï¼ˆæ¯10ç§’æ£€æŸ¥ä¸€æ¬¡ï¼‰
- [x] æ¶ˆæ¯è·¯ç”±ä¸å¤„ç†ï¼ˆmessage_handler.goï¼‰
  - [x] heartbeat - å¿ƒè·³å¤„ç†
  - [x] sync_line_accounts - åŒæ­¥Lineè´¦å·åˆ—è¡¨ï¼ˆåˆ›å»º/æ›´æ–°è´¦å·ï¼Œç”ŸæˆäºŒç»´ç ï¼‰
  - [x] incoming - è¿›çº¿æ•°æ®å¤„ç†ï¼ˆå¾…ç¬¬6å‘¨å®Œå–„å»é‡å’Œç»Ÿè®¡é€»è¾‘ï¼‰
  - [x] customer_sync - å®¢æˆ·ä¿¡æ¯åŒæ­¥ï¼ˆå¾…ç¬¬8å‘¨å®Œå–„ï¼‰
  - [x] follow_up_sync - è·Ÿè¿›è®°å½•åŒæ­¥ï¼ˆå¾…ç¬¬9å‘¨å®Œå–„ï¼‰
  - [x] account_status_change - è´¦å·çŠ¶æ€å˜åŒ–ï¼ˆæ›´æ–°çŠ¶æ€å¹¶æ¨é€å‰ç«¯ï¼‰
- [x] æ¨é€æœåŠ¡
  - [x] æœåŠ¡å™¨â†’å®¢æˆ·ç«¯ï¼šé€šè¿‡WebSocketè¿æ¥å‘é€æ¶ˆæ¯
  - [x] æœåŠ¡å™¨â†’å‰ç«¯ï¼šé€šè¿‡Hubå¹¿æ’­æ¶ˆæ¯åˆ°å‰ç«¯çœ‹æ¿
- [x] æ¶ˆæ¯å¹¿æ’­ä¸­å¿ƒï¼ˆhub.goï¼‰
  - [x] æ”¯æŒå¹¿æ’­åˆ°æŒ‡å®šåˆ†ç»„
  - [x] æ”¯æŒå¹¿æ’­åˆ°æ‰€æœ‰å‰ç«¯çœ‹æ¿
- [x] WebSocketè·¯å¾„
  - [x] /api/ws/client - Windowså®¢æˆ·ç«¯è¿æ¥ï¼ˆä½¿ç”¨æ¿€æ´»ç +tokenè®¤è¯ï¼‰
  - [x] /api/ws/dashboard - å‰ç«¯çœ‹æ¿è¿æ¥ï¼ˆéœ€è¦JWTè®¤è¯ï¼‰

#### åˆ›å»ºçš„æ–‡ä»¶
- [x] `backend/internal/websocket/types.go` - æ¶ˆæ¯ç±»å‹å®šä¹‰
- [x] `backend/internal/websocket/manager.go` - è¿æ¥ç®¡ç†å™¨
- [x] `backend/internal/websocket/client_handler.go` - Windowså®¢æˆ·ç«¯å¤„ç†å™¨
- [x] `backend/internal/websocket/dashboard_handler.go` - å‰ç«¯çœ‹æ¿å¤„ç†å™¨
- [x] `backend/internal/websocket/message_handler.go` - æ¶ˆæ¯å¤„ç†å™¨
- [x] `backend/internal/websocket/hub.go` - æ¶ˆæ¯å¹¿æ’­ä¸­å¿ƒ
- [x] `backend/internal/handlers/websocket.go` - WebSocketå¤„ç†å™¨å…¥å£

#### é›†æˆç‚¹
- [x] åœ¨ `main.go` ä¸­åˆå§‹åŒ–WebSocketç®¡ç†å™¨
- [x] åœ¨ `routes.go` ä¸­æ³¨å†ŒWebSocketè·¯ç”±
- [x] æ”¯æŒ800+å¹¶å‘è¿æ¥ï¼ˆé€šè¿‡è¿æ¥æ± ç®¡ç†ï¼‰

**å½“å‰çŠ¶æ€**: ç¬¬5å‘¨WebSocketæœåŠ¡ï¼ˆåç«¯ï¼‰å¼€å‘å·²å®Œæˆ âœ…

### ç¬¬6å‘¨ï¼šè¿›çº¿ç»Ÿè®¡æ¨¡å—ï¼ˆæ ¸å¿ƒï¼‰âœ…

#### åç«¯å¼€å‘ âœ…
- [x] è¿›çº¿æ•°æ®å¤„ç†Serviceï¼ˆincoming_service.goï¼‰
  - [x] æ¥æ”¶è¿›çº¿æ•°æ®
  - [x] å»é‡åˆ¤æ–­ï¼ˆcurrent/globalï¼‰
  - [x] è®°å½•incoming_logs
  - [x] å¢é‡æ›´æ–°ç»Ÿè®¡è¡¨
  - [x] æ·»åŠ åˆ°åº•åº“ï¼ˆå¦‚æœä¸é‡å¤ï¼‰
  - [x] GetIncomingLogList() - è·å–è¿›çº¿æ—¥å¿—åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µã€ç­›é€‰ã€æ•°æ®è¿‡æ»¤ï¼‰
- [x] å»é‡é€»è¾‘å®ç°ï¼ˆdedup_service.goï¼‰
  - [x] CheckDuplicateCurrent() - æ£€æŸ¥å½“å‰åˆ†ç»„å†…æ˜¯å¦é‡å¤
  - [x] CheckDuplicateGlobal() - æ£€æŸ¥å…¨å±€æ˜¯å¦é‡å¤
  - [x] CheckDuplicate() - æ ¹æ®åˆ†ç»„é…ç½®æ£€æŸ¥æ˜¯å¦é‡å¤
  - [x] CheckContactPoolDuplicate() - æ£€æŸ¥åº•åº“ä¸­æ˜¯å¦å·²å­˜åœ¨
- [x] ç»Ÿè®¡APIæ¥å£ï¼ˆstats_handler.goï¼‰
  - [x] GET /api/v1/stats/group/:id - åˆ†ç»„ç»Ÿè®¡
  - [x] GET /api/v1/stats/account/:id - è´¦å·ç»Ÿè®¡
  - [x] GET /api/v1/stats/overview - æ€»è§ˆç»Ÿè®¡
  - [x] GET /api/v1/stats/group/:id/trend - åˆ†ç»„è¿›çº¿è¶‹åŠ¿
  - [x] GET /api/v1/stats/account/:id/trend - è´¦å·è¿›çº¿è¶‹åŠ¿
  - [x] GET /api/v1/stats/incoming-logs - è¿›çº¿æ—¥å¿—åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µå’Œç­›é€‰ï¼‰
- [x] å®æ—¶æ¨é€ï¼ˆè¿›çº¿æ›´æ–°ï¼‰
  - [x] é€šè¿‡WebSocket Hubå¹¿æ’­è¿›çº¿æ›´æ–°åˆ°å‰ç«¯çœ‹æ¿
- [x] æ•°æ®æ¨¡å‹
  - [x] IncomingLogæ¨¡å‹ï¼ˆåˆ†åŒºè¡¨æ”¯æŒï¼‰
  - [x] ContactPoolæ¨¡å‹ï¼ˆåº•åº“æ¨¡å‹ï¼‰
- [x] ç»Ÿè®¡æœåŠ¡ï¼ˆstats_service.goï¼‰
  - [x] GetGroupStats() - è·å–åˆ†ç»„ç»Ÿè®¡
  - [x] GetAccountStats() - è·å–è´¦å·ç»Ÿè®¡
  - [x] GetOverviewStats() - è·å–æ€»è§ˆç»Ÿè®¡
  - [x] GetGroupIncomingTrend() - è·å–åˆ†ç»„è¿›çº¿è¶‹åŠ¿
  - [x] GetAccountIncomingTrend() - è·å–è´¦å·è¿›çº¿è¶‹åŠ¿
- [x] Schemaå®šä¹‰ï¼ˆschemas/incoming_log.goï¼‰
  - [x] IncomingLogQueryParams - è¿›çº¿æ—¥å¿—æŸ¥è¯¢å‚æ•°
  - [x] IncomingLogListResponse - è¿›çº¿æ—¥å¿—åˆ—è¡¨å“åº”

#### å‰ç«¯å¼€å‘ âœ…
- [x] çº¿ç´¢åˆ—è¡¨é¡µé¢ï¼ˆLeadsList.vueï¼‰
  - [x] ç­›é€‰åŒºåŸŸï¼ˆåˆ†ç»„ã€æ—¶é—´èŒƒå›´ã€æ˜¯å¦é‡å¤ã€æœç´¢ï¼‰
  - [x] æ•°æ®è¡¨æ ¼ï¼ˆæ˜¾ç¤ºè¿›çº¿æ—¥å¿—ä¿¡æ¯ï¼Œæ”¯æŒå±•å¼€/æŠ˜å ï¼‰
  - [x] å±•å¼€/æŠ˜å åŠŸèƒ½ï¼ˆæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼šå¤´åƒã€æ‰‹æœºå·ã€è´¦å·ä¿¡æ¯ã€åˆ†ç»„ä¿¡æ¯ç­‰ï¼‰
  - [x] è¿›çº¿ç»Ÿè®¡å±•ç¤ºï¼ˆç»Ÿè®¡å¡ç‰‡ï¼šæ€»è¿›çº¿ã€ä»Šæ—¥è¿›çº¿ã€é‡å¤è¿›çº¿ã€ä»Šæ—¥é‡å¤ï¼‰
  - [x] å®æ—¶æ•°æ®æ›´æ–°ï¼ˆWebSocketè¿æ¥ï¼Œæ¥æ”¶incoming_updateå’Œstats_updateæ¶ˆæ¯ï¼‰
  - [x] åˆ†é¡µåŠŸèƒ½ï¼ˆæ”¯æŒåˆ‡æ¢æ¯é¡µæ•°é‡ï¼‰
  - [x] åŠ è½½çŠ¶æ€å’Œé”™è¯¯å¤„ç†
- [x] APIå°è£…ï¼ˆapi/stats.jsï¼‰
  - [x] getIncomingLogs() - è·å–è¿›çº¿æ—¥å¿—åˆ—è¡¨
  - [x] getGroupIncomingTrend() - è·å–åˆ†ç»„è¿›çº¿è¶‹åŠ¿
  - [x] getAccountIncomingTrend() - è·å–è´¦å·è¿›çº¿è¶‹åŠ¿

#### åˆ›å»ºçš„æ–‡ä»¶
- [x] `backend/internal/schemas/incoming_log.go` - è¿›çº¿æ—¥å¿—Schemaå®šä¹‰
- [x] `frontend/src/views/admin/LeadsList.vue` - çº¿ç´¢åˆ—è¡¨é¡µé¢

#### æ›´æ–°çš„æ–‡ä»¶
- [x] `backend/internal/services/incoming_service.go` - æ·»åŠ GetIncomingLogListæ–¹æ³•
- [x] `backend/internal/handlers/stats.go` - æ·»åŠ GetIncomingLogså¤„ç†å™¨
- [x] `backend/internal/routes/routes.go` - æ³¨å†Œè¿›çº¿æ—¥å¿—åˆ—è¡¨è·¯ç”±
- [x] `frontend/src/api/stats.js` - æ·»åŠ è¿›çº¿æ—¥å¿—ç›¸å…³API

**å½“å‰çŠ¶æ€**: ç¬¬6å‘¨è¿›çº¿ç»Ÿè®¡æ¨¡å—ï¼ˆåç«¯+å‰ç«¯ï¼‰å¼€å‘å·²å®Œæˆ âœ…

### ç¬¬7å‘¨ï¼šåº•åº“ç®¡ç†æ¨¡å— âœ…

#### åç«¯å¼€å‘ âœ…
- [x] åº•åº“CRUD Serviceå±‚ï¼ˆContactPoolServiceï¼‰
  - [x] GetSummary() - è·å–åº•åº“ç»Ÿè®¡æ±‡æ€»
  - [x] GetList() - è·å–åº•åº“åˆ—è¡¨ï¼ˆæŒ‰æ¿€æ´»ç +å¹³å°ï¼‰
  - [x] GetDetailList() - è·å–åº•åº“è¯¦ç»†åˆ—è¡¨
  - [x] ImportContacts() - å¯¼å…¥è”ç³»äººï¼ˆæ–‡ä»¶ä¸Šä¼ ï¼‰
  - [x] GetImportBatchList() - è·å–å¯¼å…¥æ‰¹æ¬¡åˆ—è¡¨
- [x] å¯¼å…¥åŸå§‹è”ç³»äººåŠŸèƒ½
  - [x] æ–‡ä»¶ä¸Šä¼ ï¼ˆæ”¯æŒExcel/CSV/TXTæ ¼å¼ï¼‰
  - [x] Excelè§£æï¼ˆä½¿ç”¨excelizeåº“ï¼‰
  - [x] CSVè§£æï¼ˆä½¿ç”¨encoding/csvï¼‰
  - [x] TXTè§£æï¼ˆæ”¯æŒåˆ¶è¡¨ç¬¦å’Œé€—å·åˆ†éš”ï¼‰
  - [x] æ‰¹é‡æ’å…¥contact_poolï¼ˆåˆ†æ‰¹å¤„ç†ï¼Œæ¯æ‰¹100æ¡ï¼‰
  - [x] å»é‡æ£€æŸ¥ï¼ˆæ”¯æŒcurrentå’Œglobalä¸¤ç§å»é‡èŒƒå›´ï¼‰
- [x] åº•åº“æŸ¥è¯¢API
  - [x] GET /api/v1/contact-pool/summary - ç»Ÿè®¡æ±‡æ€»
  - [x] GET /api/v1/contact-pool/list - åˆ—è¡¨ï¼ˆæŒ‰æ¿€æ´»ç +å¹³å°ï¼‰
  - [x] GET /api/v1/contact-pool/detail - è¯¦ç»†åˆ—è¡¨
- [x] å¯¼å…¥æ‰¹æ¬¡ç®¡ç†
  - [x] ImportBatchæ¨¡å‹
  - [x] å¯¼å…¥æ‰¹æ¬¡è®°å½•åˆ›å»ºå’Œæ›´æ–°
  - [x] GET /api/v1/contact-pool/import-batches - å¯¼å…¥æ‰¹æ¬¡åˆ—è¡¨
  - [x] POST /api/v1/contact-pool/import - å¯¼å…¥è”ç³»äºº
- [x] æ•°æ®è¿‡æ»¤ä¸­é—´ä»¶æ›´æ–°
  - [x] æ”¯æŒimport_batchesè¡¨çš„æ•°æ®è¿‡æ»¤
- [x] ä¾èµ–å®‰è£…
  - [x] å®‰è£…github.com/xuri/excelize/v2ç”¨äºExcelæ–‡ä»¶è§£æ

#### åˆ›å»ºçš„æ–‡ä»¶
- [x] `backend/internal/models/import_batch.go` - å¯¼å…¥æ‰¹æ¬¡æ¨¡å‹
- [x] `backend/internal/schemas/contact_pool.go` - åº•åº“ç®¡ç†Schemaå®šä¹‰
- [x] `backend/internal/services/contact_pool_service.go` - åº•åº“ç®¡ç†æœåŠ¡å±‚
- [x] `backend/internal/handlers/contact_pool.go` - åº•åº“ç®¡ç†å¤„ç†å™¨

#### æ›´æ–°çš„æ–‡ä»¶
- [x] `backend/internal/routes/routes.go` - æ³¨å†Œåº•åº“ç®¡ç†è·¯ç”±
- [x] `backend/internal/utils/data_filter.go` - æ›´æ–°æ•°æ®è¿‡æ»¤æ”¯æŒimport_batchesè¡¨
- [x] `backend/go.mod` - æ·»åŠ excelizeä¾èµ–

#### å‰ç«¯å¼€å‘æ–‡ä»¶
- [x] `frontend/src/api/contactPool.js` - æ·»åŠ è·å–å¯¼å…¥æ‰¹æ¬¡åˆ—è¡¨API
- [x] `frontend/src/views/admin/ContactPool.vue` - åº•åº“ç®¡ç†é¡µé¢ï¼ˆç»Ÿè®¡å¡ç‰‡ã€ä¸¤ä¸ªæ ‡ç­¾é¡µã€å¯¼å…¥å¯¹è¯æ¡†ã€è¯¦ç»†åˆ—è¡¨ï¼‰

**å½“å‰çŠ¶æ€**: ç¬¬7å‘¨åº•åº“ç®¡ç†æ¨¡å—ï¼ˆåç«¯+å‰ç«¯ï¼‰å¼€å‘å·²å®Œæˆ âœ…

### ç¬¬8å‘¨ï¼šå®¢æˆ·ç®¡ç†æ¨¡å— âœ…

#### åç«¯å¼€å‘ âœ…
- [x] å®¢æˆ·CRUD Serviceå±‚ï¼ˆCustomerServiceï¼‰
  - [x] CreateCustomer() - åˆ›å»ºå®¢æˆ·
  - [x] GetCustomerList() - è·å–å®¢æˆ·åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µã€ç­›é€‰ã€æ•°æ®è¿‡æ»¤ï¼‰
  - [x] GetCustomerDetail() - è·å–å®¢æˆ·è¯¦æƒ…
  - [x] UpdateCustomer() - æ›´æ–°å®¢æˆ·ä¿¡æ¯
  - [x] DeleteCustomer() - åˆ é™¤å®¢æˆ·ï¼ˆè½¯åˆ é™¤ï¼‰
  - [x] SyncCustomer() - åŒæ­¥å®¢æˆ·ä¿¡æ¯ï¼ˆä»Windowså®¢æˆ·ç«¯ï¼‰
- [x] å®¢æˆ·APIæ¥å£
  - [x] GET /api/customers - åˆ—è¡¨ï¼ˆç­›é€‰ã€åˆ†é¡µï¼‰
  - [x] GET /api/customers/:id - å®¢æˆ·è¯¦æƒ…
  - [x] PUT /api/customers/:id - æ›´æ–°å®¢æˆ·ä¿¡æ¯
  - [x] DELETE /api/customers/:id - åˆ é™¤
- [x] å®¢æˆ·ä¿¡æ¯åŒæ­¥å¤„ç†ï¼ˆä»Windowså®¢æˆ·ç«¯ï¼‰
  - [x] WebSocketæ¶ˆæ¯å¤„ç†å™¨handleCustomerSync()å®ç°
  - [x] æ”¯æŒå®¢æˆ·ä¿¡æ¯çš„åˆ›å»ºå’Œæ›´æ–°
  - [x] è‡ªåŠ¨å…³è”Lineè´¦å·ï¼ˆå¦‚æœæä¾›äº†line_account_idï¼‰
- [x] å®¢æˆ·ç±»å‹åˆ¤æ–­é€»è¾‘
- [x] æ•°æ®è¿‡æ»¤ä¸­é—´ä»¶æ”¯æŒcustomersè¡¨

#### åˆ›å»ºçš„æ–‡ä»¶
- [x] `backend/internal/models/customer.go` - å®¢æˆ·æ¨¡å‹
- [x] `backend/internal/schemas/customer.go` - å®¢æˆ·Schemaå®šä¹‰
- [x] `backend/internal/services/customer_service.go` - å®¢æˆ·æœåŠ¡å±‚
- [x] `backend/internal/handlers/customer.go` - å®¢æˆ·å¤„ç†å™¨

#### æ›´æ–°çš„æ–‡ä»¶
- [x] `backend/internal/routes/routes.go` - æ³¨å†Œå®¢æˆ·ç®¡ç†è·¯ç”±
- [x] `backend/internal/websocket/message_handler.go` - æ›´æ–°å®¢æˆ·åŒæ­¥å¤„ç†
- [x] `backend/internal/websocket/types.go` - æ›´æ–°CustomerDataç»“æ„ï¼Œæ·»åŠ PlatformTypeå­—æ®µ
- [x] `frontend/src/views/admin/CustomerList.vue` - å®¢æˆ·åˆ—è¡¨é¡µé¢ï¼ˆå®Œæ•´å®ç°ï¼‰

#### å‰ç«¯å¼€å‘ âœ…
- [x] å®¢æˆ·åˆ—è¡¨é¡µé¢ï¼ˆCustomerList.vueï¼‰
  - [x] å¹³å°ç­›é€‰
  - [x] ç­›é€‰åŒºåŸŸï¼ˆåˆ†ç»„ã€å®¢æˆ·ç±»å‹ã€æœç´¢ï¼‰
  - [x] æ•°æ®è¡¨æ ¼ï¼ˆæ˜¾ç¤ºå®¢æˆ·ä¿¡æ¯ï¼šIDã€å¤´åƒã€æ˜¾ç¤ºåç§°ã€å¹³å°ã€æ¿€æ´»ç ã€å®¢æˆ·ç±»å‹ã€æ‰‹æœºå·ã€åˆ›å»ºæ—¶é—´ï¼‰
  - [x] å®¢æˆ·è¯¦æƒ…å¯¹è¯æ¡†ï¼ˆåŸºæœ¬ä¿¡æ¯å±•ç¤ºã€ç¼–è¾‘åŠŸèƒ½ï¼‰
  - [x] è·Ÿè¿›è®°å½•æŒ‰é’®ï¼ˆè·³è½¬åˆ°è·Ÿè¿›è®°å½•é¡µé¢å¹¶è‡ªåŠ¨ç­›é€‰ï¼‰
  - [x] åˆ†é¡µåŠŸèƒ½
  - [x] å®¢æˆ·ç±»å‹æ ‡ç­¾æ˜¾ç¤ºï¼ˆæ ¹æ®ç±»å‹æ˜¾ç¤ºä¸åŒé¢œè‰²ï¼šå®æ—¶-ç»¿è‰²ã€è¡¥å½•-è“è‰²ã€é‡å¤-æ©™è‰²ã€å¯¼å…¥é‡å¤-çº¢è‰²ï¼‰

**å½“å‰çŠ¶æ€**: ç¬¬8å‘¨å®¢æˆ·ç®¡ç†æ¨¡å—ï¼ˆåç«¯+å‰ç«¯ï¼‰å¼€å‘å·²å®Œæˆ âœ…

### ç¬¬9å‘¨ï¼šè·Ÿè¿›è®°å½•æ¨¡å— âœ…

#### åç«¯å¼€å‘ âœ…
- [x] è·Ÿè¿›è®°å½•CRUD Serviceå±‚ï¼ˆFollowUpServiceï¼‰
  - [x] CreateFollowUp() - åˆ›å»ºè·Ÿè¿›è®°å½•
  - [x] GetFollowUpList() - è·å–è·Ÿè¿›è®°å½•åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µã€ç­›é€‰ã€æ•°æ®è¿‡æ»¤ï¼‰
  - [x] UpdateFollowUp() - æ›´æ–°è·Ÿè¿›è®°å½•å†…å®¹
  - [x] DeleteFollowUp() - åˆ é™¤è·Ÿè¿›è®°å½•ï¼ˆè½¯åˆ é™¤ï¼‰
  - [x] BatchCreateFollowUp() - æ‰¹é‡åˆ›å»ºè·Ÿè¿›è®°å½•
  - [x] SyncFollowUp() - åŒæ­¥è·Ÿè¿›è®°å½•ï¼ˆä»Windowså®¢æˆ·ç«¯ï¼‰
- [x] è·Ÿè¿›è®°å½•APIæ¥å£
  - [x] GET /api/follow-ups - åˆ—è¡¨ï¼ˆç­›é€‰ã€åˆ†é¡µï¼‰
  - [x] POST /api/follow-ups - åˆ›å»º
  - [x] PUT /api/follow-ups/:id - ç¼–è¾‘å†…å®¹
  - [x] DELETE /api/follow-ups/:id - åˆ é™¤
  - [x] POST /api/follow-ups/batch - æ‰¹é‡åˆ›å»º
- [x] è·Ÿè¿›è®°å½•åŒæ­¥å¤„ç†ï¼ˆä»Windowså®¢æˆ·ç«¯ï¼‰
  - [x] WebSocketæ¶ˆæ¯å¤„ç†å™¨handleFollowUpSync()å®ç°
  - [x] æ”¯æŒè·Ÿè¿›è®°å½•çš„åˆ›å»º
  - [x] è‡ªåŠ¨å…³è”Lineè´¦å·å’Œå®¢æˆ·ï¼ˆå¦‚æœæä¾›äº†line_account_idå’Œcustomer_idï¼‰
- [x] æ•°æ®è¿‡æ»¤ä¸­é—´ä»¶æ”¯æŒfollow_up_recordsè¡¨

#### åˆ›å»ºçš„æ–‡ä»¶
- [x] `backend/internal/models/follow_up_record.go` - è·Ÿè¿›è®°å½•æ¨¡å‹
- [x] `backend/internal/schemas/follow_up.go` - è·Ÿè¿›è®°å½•Schemaå®šä¹‰
- [x] `backend/internal/services/follow_up_service.go` - è·Ÿè¿›è®°å½•æœåŠ¡å±‚
- [x] `backend/internal/handlers/follow_up.go` - è·Ÿè¿›è®°å½•å¤„ç†å™¨

#### æ›´æ–°çš„æ–‡ä»¶
- [x] `backend/internal/routes/routes.go` - æ³¨å†Œè·Ÿè¿›è®°å½•è·¯ç”±
- [x] `backend/internal/websocket/message_handler.go` - æ›´æ–°è·Ÿè¿›è®°å½•åŒæ­¥å¤„ç†
- [x] `backend/internal/websocket/types.go` - æ›´æ–°FollowUpDataç»“æ„ï¼Œæ·»åŠ PlatformTypeå­—æ®µ
- [x] `frontend/src/views/admin/FollowUpRecords.vue` - è·Ÿè¿›è®°å½•é¡µé¢ï¼ˆå®Œæ•´å®ç°ï¼‰

#### å‰ç«¯å¼€å‘ âœ…
- [x] è·Ÿè¿›è®°å½•é¡µé¢ï¼ˆFollowUpRecords.vueï¼‰
  - [x] ç­›é€‰åŒºåŸŸï¼ˆå¹³å°ã€åˆ†ç»„ã€æ—¶é—´èŒƒå›´ã€æœç´¢ï¼‰
  - [x] æ•°æ®è¡¨æ ¼ï¼ˆæ˜¾ç¤ºè·Ÿè¿›è®°å½•ä¿¡æ¯ï¼šæ¿€æ´»ç ã€ä¸»è´¦å·ä¿¡æ¯ã€çº¿ç´¢è´¦å·ä¿¡æ¯ã€åˆ›å»ºæ—¥æœŸã€å†…å®¹ï¼‰
  - [x] æ–°å¢è®°å½•å¯¹è¯æ¡†ï¼ˆæ”¯æŒé€‰æ‹©åˆ†ç»„ã€å¹³å°ã€Lineè´¦å·ã€å®¢æˆ·ï¼‰
  - [x] ç¼–è¾‘å¯¹è¯æ¡†ï¼ˆç¼–è¾‘è·Ÿè¿›å†…å®¹ï¼‰
  - [x] åˆ é™¤ç¡®è®¤åŠŸèƒ½
  - [x] åˆ†é¡µåŠŸèƒ½
  - [x] æ”¯æŒä»è·Ÿè¿›è®°å½•è·³è½¬åˆ°è´¦å·åˆ—è¡¨å’Œå®¢æˆ·åˆ—è¡¨
  - [x] æ”¯æŒä»å®¢æˆ·åˆ—è¡¨è·³è½¬åˆ°è·Ÿè¿›è®°å½•é¡µé¢å¹¶è‡ªåŠ¨ç­›é€‰

**å½“å‰çŠ¶æ€**: ç¬¬9å‘¨è·Ÿè¿›è®°å½•æ¨¡å—ï¼ˆåç«¯+å‰ç«¯ï¼‰å¼€å‘å·²å®Œæˆ âœ…

### ç¬¬11å‘¨ï¼šç”¨æˆ·ç®¡ç†ä¸å¤§æ¨¡å‹æ¨¡å— âœ…

#### åç«¯å¼€å‘ âœ…
- [x] ç”¨æˆ·ç®¡ç†APIï¼ˆç®¡ç†å‘˜ä¸“ç”¨ï¼‰
  - [x] GET /api/admin/users - ç”¨æˆ·åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µã€ç­›é€‰ã€æœç´¢ï¼‰
  - [x] POST /api/admin/users - åˆ›å»ºæ™®é€šç”¨æˆ·
  - [x] PUT /api/admin/users/:id - æ›´æ–°ç”¨æˆ·
  - [x] DELETE /api/admin/users/:id - åˆ é™¤ç”¨æˆ·ï¼ˆè½¯åˆ é™¤ï¼Œæ£€æŸ¥å…³è”åˆ†ç»„ï¼‰
- [x] å¤§æ¨¡å‹é…ç½®APIï¼ˆç®¡ç†å‘˜ä¸“ç”¨ï¼‰
  - [x] GET /api/admin/llm/configs - é…ç½®åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µã€ç­›é€‰ã€æœç´¢ï¼‰
  - [x] POST /api/admin/llm/configs - åˆ›å»ºé…ç½®ï¼ˆAPI Keyè‡ªåŠ¨åŠ å¯†å­˜å‚¨ï¼‰
  - [x] PUT /api/admin/llm/configs/:id - æ›´æ–°é…ç½®
  - [x] DELETE /api/admin/llm/configs/:id - åˆ é™¤é…ç½®ï¼ˆæ£€æŸ¥å…³è”æ¨¡æ¿ï¼‰
  - [x] POST /api/admin/llm/configs/:id/test - æµ‹è¯•è¿æ¥
- [x] Promptæ¨¡æ¿API
  - [x] GET /api/admin/llm/templates - æ¨¡æ¿åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µã€ç­›é€‰ã€æœç´¢ï¼‰
  - [x] POST /api/admin/llm/templates - åˆ›å»ºæ¨¡æ¿
  - [x] PUT /api/admin/llm/templates/:id - æ›´æ–°æ¨¡æ¿
  - [x] DELETE /api/admin/llm/templates/:id - åˆ é™¤æ¨¡æ¿
- [x] API KeyåŠ å¯†/è§£å¯†æœåŠ¡
  - [x] ä½¿ç”¨AES-256-GCMåŠ å¯†ç®—æ³•
  - [x] æ”¯æŒç¯å¢ƒå˜é‡ENCRYPTION_KEYé…ç½®åŠ å¯†å¯†é’¥
  - [x] è‡ªåŠ¨åŠ å¯†å­˜å‚¨ï¼Œè§£å¯†ä½¿ç”¨
- [x] å¤§æ¨¡å‹è°ƒç”¨ä»£ç†æœåŠ¡
  - [x] OpenAIé€‚é…å™¨ï¼ˆæ”¯æŒChat Completions APIï¼‰
  - [x] Claudeé€‚é…å™¨ï¼ˆæ”¯æŒAnthropic Messages APIï¼‰
  - [x] é€šä¹‰åƒé—®é€‚é…å™¨ï¼ˆæ”¯æŒDashScope APIï¼‰
  - [x] è‡ªå®šä¹‰æä¾›å•†é€‚é…å™¨ï¼ˆé€šç”¨HTTPæ¥å£ï¼‰
  - [x] æ”¯æŒé‡è¯•æœºåˆ¶å’Œè¶…æ—¶æ§åˆ¶
- [x] Windowså®¢æˆ·ç«¯è°ƒç”¨æ¥å£
  - [x] GET /api/llm/configs - è·å–å¯ç”¨é…ç½®ï¼ˆä¸è¿”å›API Keyï¼‰
  - [x] POST /api/llm/call - è°ƒç”¨å¤§æ¨¡å‹ï¼ˆæ”¯æŒè‡ªå®šä¹‰å‚æ•°ï¼‰
  - [x] POST /api/llm/call-template - ä½¿ç”¨æ¨¡æ¿è°ƒç”¨ï¼ˆæ”¯æŒå˜é‡æ›¿æ¢ï¼‰
  - [x] GET /api/llm/templates - è·å–æ¨¡æ¿åˆ—è¡¨
- [x] è°ƒç”¨è®°å½•Service
  - [x] è‡ªåŠ¨è®°å½•æ‰€æœ‰è°ƒç”¨ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰
  - [x] Tokenç»Ÿè®¡ï¼ˆæ€»Tokenã€Prompt Tokenã€Completion Tokenï¼‰
  - [x] è°ƒç”¨è€—æ—¶ç»Ÿè®¡ï¼ˆæ¯«ç§’çº§ï¼‰
  - [x] GET /api/admin/llm/call-logs - è°ƒç”¨æ—¥å¿—åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µã€ç­›é€‰ã€æ—¶é—´èŒƒå›´ï¼‰

#### åˆ›å»ºçš„æ–‡ä»¶
- [x] `backend/internal/models/llm_config.go` - LLMé…ç½®æ¨¡å‹
- [x] `backend/internal/models/llm_template.go` - Promptæ¨¡æ¿æ¨¡å‹ï¼ˆåŒ…å«JSONBç±»å‹å®šä¹‰ï¼‰
- [x] `backend/internal/models/llm_call_log.go` - LLMè°ƒç”¨æ—¥å¿—æ¨¡å‹
- [x] `backend/internal/schemas/user.go` - ç”¨æˆ·ç®¡ç†Schemaå®šä¹‰
- [x] `backend/internal/schemas/llm.go` - LLMç›¸å…³Schemaå®šä¹‰
- [x] `backend/internal/services/user_service.go` - ç”¨æˆ·æœåŠ¡å±‚
- [x] `backend/internal/services/llm_config_service.go` - LLMé…ç½®æœåŠ¡å±‚
- [x] `backend/internal/services/llm_template_service.go` - Promptæ¨¡æ¿æœåŠ¡å±‚
- [x] `backend/internal/services/llm_service.go` - LLMè°ƒç”¨æœåŠ¡å±‚
- [x] `backend/internal/services/llm_provider.go` - LLMæä¾›å•†é€‚é…å™¨
- [x] `backend/internal/services/encryption_service.go` - API KeyåŠ å¯†æœåŠ¡
- [x] `backend/internal/handlers/user.go` - ç”¨æˆ·ç®¡ç†å¤„ç†å™¨
- [x] `backend/internal/handlers/llm.go` - LLMç›¸å…³å¤„ç†å™¨

#### æ›´æ–°çš„æ–‡ä»¶
- [x] `backend/internal/routes/routes.go` - æ³¨å†Œç”¨æˆ·ç®¡ç†å’ŒLLMç›¸å…³è·¯ç”±

#### å‰ç«¯å¼€å‘æ–‡ä»¶
- [x] `frontend/src/api/llm.js` - æ›´æ–°LLM APIå°è£…ï¼ˆæ·»åŠ åˆ†é¡µå‚æ•°å’Œè°ƒç”¨è®°å½•APIï¼‰
- [x] `frontend/src/views/admin/UserManage.vue` - ç”¨æˆ·ç®¡ç†é¡µé¢ï¼ˆå®Œæ•´å®ç°ï¼‰
- [x] `frontend/src/views/admin/LLMConfig.vue` - å¤§æ¨¡å‹é…ç½®é¡µé¢ï¼ˆå®Œæ•´å®ç°ï¼‰
- [x] `frontend/src/views/admin/LLMCallLogs.vue` - å¤§æ¨¡å‹è°ƒç”¨è®°å½•é¡µé¢ï¼ˆå®Œæ•´å®ç°ï¼‰

#### é—®é¢˜ä¿®å¤
- [x] ä¿®å¤å‰ç«¯page_sizeå‚æ•°è¶…å‡ºåç«¯é™åˆ¶çš„é—®é¢˜ï¼ˆå°†1000æ”¹ä¸º100ï¼Œç¬¦åˆåç«¯éªŒè¯è§„åˆ™max=100ï¼‰

#### å‰ç«¯å¼€å‘ âœ…
- [x] ç”¨æˆ·ç®¡ç†é¡µé¢ï¼ˆç®¡ç†å‘˜ï¼‰
  - [x] ç”¨æˆ·åˆ—è¡¨ï¼ˆåˆ†é¡µã€ç­›é€‰ã€æœç´¢ï¼‰
  - [x] æ–°å¢ç”¨æˆ·å¯¹è¯æ¡†
  - [x] ç¼–è¾‘ç”¨æˆ·å¯¹è¯æ¡†
  - [x] åˆ é™¤ç”¨æˆ·åŠŸèƒ½
- [x] å¤§æ¨¡å‹é…ç½®é¡µé¢ï¼ˆç®¡ç†å‘˜ï¼‰
  - [x] é…ç½®åˆ—è¡¨ï¼ˆåˆ†é¡µã€ç­›é€‰ã€æœç´¢ï¼‰
  - [x] æ–°å¢/ç¼–è¾‘é…ç½®å¯¹è¯æ¡†
  - [x] Promptæ¨¡æ¿ç®¡ç†ï¼ˆæ ‡ç­¾é¡µï¼‰
  - [x] æ¨¡æ¿åˆ—è¡¨ï¼ˆåˆ†é¡µã€ç­›é€‰ã€æœç´¢ï¼‰
  - [x] æ–°å¢/ç¼–è¾‘æ¨¡æ¿å¯¹è¯æ¡†
  - [x] æµ‹è¯•è¿æ¥åŠŸèƒ½
- [x] å¤§æ¨¡å‹è°ƒç”¨è®°å½•é¡µé¢ï¼ˆç®¡ç†å‘˜ï¼‰
  - [x] è°ƒç”¨è®°å½•åˆ—è¡¨ï¼ˆåˆ†é¡µã€ç­›é€‰ã€æœç´¢ï¼‰
  - [x] ç­›é€‰åŠŸèƒ½ï¼ˆé…ç½®ã€æ¨¡æ¿ã€æ¿€æ´»ç ã€çŠ¶æ€ã€æ—¶é—´èŒƒå›´ï¼‰
  - [x] æŸ¥çœ‹è¯¦æƒ…å¯¹è¯æ¡†ï¼ˆåŸºæœ¬ä¿¡æ¯ã€Tokenç»Ÿè®¡ã€è¯·æ±‚æ¶ˆæ¯ã€è¯·æ±‚å‚æ•°ã€å“åº”å†…å®¹ã€å“åº”æ•°æ®ï¼‰
  - [x] Tokenç»Ÿè®¡ï¼ˆæ€»è°ƒç”¨æ¬¡æ•°ã€æˆåŠŸæ¬¡æ•°ã€å¤±è´¥æ¬¡æ•°ã€æ€»Tokenæ•°ã€å¹³å‡è€—æ—¶ï¼‰

**å½“å‰çŠ¶æ€**: ç¬¬11å‘¨ç”¨æˆ·ç®¡ç†ä¸å¤§æ¨¡å‹æ¨¡å—ï¼ˆåç«¯+å‰ç«¯ï¼‰å¼€å‘å·²å®Œæˆ âœ…


